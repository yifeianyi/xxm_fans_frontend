(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73375,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},17697,e=>{"use strict";let t=(0,e.i(75254).default)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["PlayCircle",()=>t],17697)},72666,63209,37941,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75254);let a=(0,r.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],63209);let l=(0,r.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);class i extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}handleRetry=()=>{this.setState({hasError:!1,error:void 0})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,t.jsx)("div",{className:"min-h-[400px] flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white/80 backdrop-blur-sm rounded-[2rem] border-4 border-white shadow-xl p-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(a,{className:"w-8 h-8 text-red-400"})}),(0,t.jsx)("h2",{className:"text-xl font-black text-[#4a3728] mb-2",children:"出错了"}),(0,t.jsx)("p",{className:"text-[#8eb69b] text-sm mb-6",children:"组件加载失败，请刷新页面重试"}),(0,t.jsxs)("button",{onClick:this.handleRetry,className:"inline-flex items-center gap-2 px-6 py-3 bg-[#f8b195] text-white rounded-full font-black hover:bg-[#f67280] transition-colors",children:[(0,t.jsx)(l,{size:18}),"重试"]})]})}):this.props.children}}e.s(["ErrorBoundary",()=>i],37941),e.s([],72666)},97660,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(63209);e.i(72666);var a=e.i(37941);e.i(78514);var l=e.i(46852);let i=({cell:e,todayStr:s,isSelected:r,onClick:a})=>{let l=e.date===s,i=!!e.live?.date;return(0,t.jsxs)("div",{onClick:()=>{i&&e.live&&a()},onKeyDown:e=>{i&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),a())},className:`aspect-video flex items-center justify-center relative z-0 rounded-2xl transition-all ${e.day?"bg-white/60":"bg-transparent"} ${i?"cursor-pointer hover:bg-[#fef5f0] shadow-sm":""} ${r?"bg-[#fef5f0] ring-4 ring-[#f8b195]/20":""} ${l?"ring-2 ring-[#8eb69b]/50":""}`,role:i?"button":"gridcell",tabIndex:i?0:void 0,"aria-label":i?`${e.date}有直播记录`:e.date,"aria-selected":r,children:[(0,t.jsx)("span",{className:`text-sm font-black ${i?"text-[#f8b195]":l?"text-[#8eb69b] font-bold":"text-[#4a3728]/40"}`,children:e.day}),i&&(0,t.jsx)("div",{className:"absolute bottom-1 w-1 h-1 rounded-full bg-[#f8b195]","aria-hidden":"true"}),l&&(0,t.jsx)("div",{className:"absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-[#8eb69b]","aria-hidden":"true"})]})},n=["一","二","三","四","五","六","日"],c=({currentDate:e,cells:s,todayStr:r,onCellClick:a,selectedDate:l})=>(0,t.jsxs)("div",{className:"relative z-0 grid grid-cols-7 gap-1 bg-white/30 p-2 rounded-[2.5rem] border border-white/50 shadow-inner",children:[n.map((e,s)=>(0,t.jsx)("div",{className:`py-2 text-center text-[10px] font-black uppercase tracking-widest ${s>=5?"text-[#f67280]":"text-[#8eb69b]"}`,"aria-label":`星期${e}`,children:e},e)),s.map((e,s)=>(0,t.jsx)(i,{cell:e,todayStr:r,isSelected:l===e.date,onClick:()=>a(e)},s))]});var o=e.i(73375),d=e.i(63059),x=e.i(74080);let h=({currentDate:e,onMonthChange:r,onDateChange:a,minYear:l=2019,maxYear:i})=>{let[n,c]=(0,s.useState)(!1),[h,b]=(0,s.useState)(e.getFullYear()),[m,u]=(0,s.useState)(e.getMonth()),[f,p]=(0,s.useState)(!1),g=(0,s.useRef)(null),v=i||new Date().getFullYear(),j=(0,s.useMemo)(()=>Array.from({length:v-l+1},(e,t)=>l+t),[l,v]);(0,s.useEffect)(()=>{p(!0)},[]),(0,s.useEffect)(()=>{n&&(b(e.getFullYear()),u(e.getMonth()))},[n,e]),(0,s.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&c(!1)};return n&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[n]);let w=n&&f?(0,x.createPortal)((0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm",style:{zIndex:9999},onClick:()=>c(!1)}),(0,t.jsxs)("div",{ref:g,className:"fixed bg-white rounded-[2rem] shadow-[0_8px_32px_rgba(0,0,0,0.12)] border-2 border-[#f2f9f1] p-5 w-[320px] max-w-[calc(100vw-40px)]",style:{zIndex:1e4,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"text-xs font-black text-[#8eb69b] uppercase tracking-[0.2em] mb-2",children:"Year"}),(0,t.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:j.map(e=>(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),b(e),a(new Date(e,m,1))},className:`h-12 flex items-center justify-center rounded-xl text-sm font-black transition-all ${h===e?"bg-[#d97706] text-white shadow-lg shadow-[#d97706]/30":"bg-gray-50 text-gray-600 hover:bg-gray-100 hover:text-gray-800"}`,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-black text-[#8eb69b] uppercase tracking-[0.2em] mb-2",children:"Month"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-3",children:Array.from({length:12},(e,t)=>t+1).map(e=>(0,t.jsx)("button",{onClick:t=>{var s;t.stopPropagation(),u(s=e-1),a(new Date(h,s,1)),c(!1)},className:`h-12 flex items-center justify-center rounded-xl text-sm font-black transition-all ${m===e-1?"bg-[#d97706] text-white shadow-lg shadow-[#d97706]/30":"bg-gray-50 text-gray-600 hover:bg-gray-100 hover:text-gray-800"}`,children:e},e))})]})]})]}),document.body):null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 bg-white/60 p-2 rounded-3xl border border-white",children:[(0,t.jsx)("button",{onClick:()=>r(-1),className:"p-3 hover:bg-white rounded-2xl text-[#8eb69b] transition-all","aria-label":"上个月",children:(0,t.jsx)(o.ChevronLeft,{size:20})}),(0,t.jsxs)("button",{onClick:()=>c(!n),className:"px-4 py-2 hover:bg-white rounded-2xl text-[#4a3728] font-black tabular-nums transition-all flex items-center gap-2","aria-label":"选择年月",children:[e.getFullYear(),"年 ",e.getMonth()+1,"月",(0,t.jsx)(d.ChevronRight,{size:14,className:`transform transition-transform ${n?"rotate-90":""}`})]}),(0,t.jsx)("button",{onClick:()=>r(1),className:"p-3 hover:bg-white rounded-2xl text-[#8eb69b] transition-all","aria-label":"下个月",children:(0,t.jsx)(d.ChevronRight,{size:20})}),(0,t.jsx)("button",{onClick:()=>{let e=new Date;a(new Date(e.getFullYear(),e.getMonth(),1)),c(!1)},className:"px-4 py-2 bg-gray-50 hover:bg-[#d97706] hover:text-white rounded-2xl text-gray-600 font-black transition-all flex items-center gap-2 border border-gray-200","aria-label":"回到今天",children:"今天"})]}),w]})};var b=e.i(87316);let m=({title:e="直播纪事",description:s="The Forest Archives"})=>(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsx)("div",{className:"bg-[#f8b195] text-white p-4 rounded-3xl shadow-lg shadow-[#f8b195]/20 animate-pulse",children:(0,t.jsx)(b.Calendar,{size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-black text-[#4a3728] tracking-tighter",children:e}),(0,t.jsx)("p",{className:"text-xs text-[#8eb69b] font-black uppercase tracking-[0.2em]",children:s})]})]});var u=e.i(73708),f=e.i(27927),p=e.i(90597),g=e.i(17697),v=e.i(53339),j=e.i(75254);let w=(0,j.default)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),y=(0,j.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),k=(0,j.default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);var N=e.i(37727);function C({src:e,alt:r,placeholder:a="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjVmNWY1Ii8+PC9zdmc+",className:l="",style:i={},onLoad:n,onError:c}){let[o,d]=(0,s.useState)(a),[x,h]=(0,s.useState)(!1),b=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!window.IntersectionObserver)return void d(e);let t=new IntersectionObserver(s=>{s.forEach(s=>{s.isIntersecting&&(d(e),t.disconnect())})},{rootMargin:"100px",threshold:.1});return b.current&&t.observe(b.current),()=>t.disconnect()},[e]),(0,t.jsx)("img",{ref:b,src:o,alt:r,className:l,style:{...i,opacity:x?1:.5,transition:"opacity 0.3s ease-in-out"},onLoad:()=>{h(!0),n?.()},onError:()=>{d(a),c?.()}})}function z(e){if(!e)return"";let t=e.match(/BV[\w]+/);if(!t)return e;let s=t[0],r=e.match(/[?&]p=(\d+)/),a=r?r[1]:"1";return`https://player.bilibili.com/player.html?bvid=${s}&page=${a}`}let M=({live:e})=>{let[r,a]=(0,s.useState)(0),[l,i]=(0,s.useState)(e.screenshots&&e.screenshots.length>0?e.screenshots[0]:null),[n,c]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),[b,m]=(0,s.useState)(null),j=(0,s.useRef)(null),M=(0,s.useMemo)(()=>{if(!e)return[];if(e.recordings&&e.recordings.length>0)return e.recordings;if(e.bvid){let t=e.parts||1,s=[];for(let r=1;r<=t;r++)s.push({title:1===r?e.title||"直播回放":`${e.title||"直播回放"} - P${r}`,url:`https://www.bilibili.com/video/${e.bvid}${r>1?`?p=${r}`:""}`});return s}return[]},[e]),S=(0,s.useMemo)(()=>{if(M.length>0){let e=M[r];if(e?.url)return z(e.url)}return""},[M,r]),D=(0,s.useCallback)(t=>{if(t.stopPropagation(),!e.screenshots||!l)return;let s=e.screenshots.findIndex(e=>e.thumbnailUrl===l.thumbnailUrl);if(-1===s)return;let r=0===s?e.screenshots.length-1:s-1;i(e.screenshots[r]),setTimeout(()=>{let e=j.current?.querySelectorAll("button");e&&e[r]&&e[r].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},50)},[e.screenshots,l]),A=(0,s.useCallback)(t=>{if(t.stopPropagation(),!e.screenshots||!l)return;let s=e.screenshots.findIndex(e=>e.thumbnailUrl===l.thumbnailUrl);if(-1===s)return;let r=s===e.screenshots.length-1?0:s+1;i(e.screenshots[r]),setTimeout(()=>{let e=j.current?.querySelectorAll("button");e&&e[r]&&e[r].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},50)},[e.screenshots,l]),$=(0,s.useCallback)(e=>{a(e),n&&(c(!1),setTimeout(()=>c(!0),0))},[n]),I=e.songCuts||[];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-12 animate-in slide-in-from-bottom-8 duration-700",id:"live-detail",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-stretch",children:[(0,t.jsxs)("div",{className:"lg:col-span-8 bg-white/40 p-8 md:p-10 rounded-[3.5rem] border-4 border-white shadow-2xl backdrop-blur-md flex flex-col justify-center gap-6 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute -right-10 -bottom-10 text-[180px] font-black text-[#f8b195]/5 pointer-events-none select-none",children:"MEMORY"}),(0,t.jsxs)("div",{className:"space-y-8 relative z-10",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-3 px-5 py-2 bg-[#fef5f0] rounded-full text-[#f8b195] w-fit border border-[#f8b195]/20 shadow-sm",children:[(0,t.jsx)(w,{size:20}),(0,t.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.3em]",children:"Official Archive"})]}),(0,t.jsxs)("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-black text-[#4a3728] tracking-tighter leading-none",children:[e.date," ",(0,t.jsx)("span",{className:"text-[#f8b195] block md:inline mt-2 md:mt-0",children:"直播档案"})]}),(0,t.jsx)("p",{className:"text-xl md:text-2xl text-[#8eb69b] font-bold leading-relaxed tracking-tight max-w-4xl",children:e.summary||`${e.date} 的精彩直播时刻`})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-4 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white/40 p-6 rounded-[2.5rem] border-4 border-white shadow-xl backdrop-blur-md flex flex-col items-center justify-center text-center space-y-2 col-span-2",children:[(0,t.jsx)(p.Heart,{size:24,className:"text-[#f67280]"}),(0,t.jsx)("span",{className:"text-[10px] font-black text-[#8eb69b] uppercase tracking-widest",children:"总弹幕数"}),(0,t.jsx)("span",{className:"text-2xl font-black text-[#4a3728]",children:e.danmakuCount||"N/A"})]}),(0,t.jsx)("div",{className:"bg-white/40 p-6 rounded-[2.5rem] border-4 border-white shadow-xl backdrop-blur-md flex flex-col items-center justify-center text-center space-y-2 col-span-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 w-full justify-around px-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-[9px] font-black text-[#8eb69b] uppercase tracking-widest mb-1",children:"开播"}),(0,t.jsx)("span",{className:"text-lg font-black text-[#4a3728] tabular-nums",children:e.startTime||"N/A"})]}),(0,t.jsx)("div",{className:"w-px h-8 bg-gray-100"}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-[9px] font-black text-[#8eb69b] uppercase tracking-widest mb-1",children:"直播时长"}),(0,t.jsx)("span",{className:"text-sm font-black text-[#f8b195] bg-[#fef5f0] px-3 py-1 rounded-full",children:e.duration||"N/A"})]}),(0,t.jsx)("div",{className:"w-px h-8 bg-gray-100"}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-[9px] font-black text-[#8eb69b] uppercase tracking-widest mb-1",children:"下播"}),(0,t.jsx)("span",{className:"text-lg font-black text-[#4a3728] tabular-nums",children:e.endTime||"N/A"})]})]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 lg:items-start",children:[(0,t.jsxs)("div",{className:"lg:col-span-8 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-6 bg-[#f8b195] rounded-full"}),(0,t.jsx)("h3",{className:"text-2xl font-black text-[#4a3728] tracking-tight",children:"完整回放档案"})]}),M.length>0&&S&&(0,t.jsxs)("button",{onClick:()=>m(S),className:"text-xs font-black text-[#8eb69b] hover:text-[#f8b195] transition-colors flex items-center gap-2",children:[(0,t.jsx)(y,{size:14})," 全屏播放"]})]}),M.length>1&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 bg-white/40 p-3 rounded-3xl border-2 border-white shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 text-[#f8b195] text-[10px] font-black uppercase tracking-widest border-r border-[#f8b195]/20 mr-1",children:[(0,t.jsx)(k,{size:14})," 视频分段"]}),M.map((e,s)=>(0,t.jsx)("button",{onClick:()=>$(s),className:`px-4 py-2 rounded-2xl text-[11px] font-black transition-all ${r===s?"bg-[#f8b195] text-white shadow-md":"bg-white/60 text-[#8eb69b] hover:bg-white border border-white"}`,children:e.title},s))]}),(0,t.jsx)("div",{className:"aspect-video bg-black rounded-[3.5rem] overflow-hidden border-4 border-white shadow-2xl relative group",children:!n&&S?(0,t.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-900 cursor-pointer",onClick:()=>c(!0),children:[e.coverUrl&&(0,t.jsx)("img",{src:e.coverUrl,alt:"Cover",className:"absolute inset-0 w-full h-full object-cover"}),(0,t.jsxs)("div",{className:"relative z-10 flex flex-col items-center gap-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-[#f8b195] rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:(0,t.jsx)(g.PlayCircle,{size:40,className:"text-white"})}),(0,t.jsx)("span",{className:"text-[#8eb69b] font-black text-sm",children:"点击播放"})]})]}):S?(0,t.jsx)("iframe",{src:S,className:"w-full h-full border-0",allowFullScreen:!0},S):(0,t.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#8eb69b] bg-gray-900",children:[(0,t.jsx)(g.PlayCircle,{size:48,className:"mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-sm font-black tracking-wider",children:"暂无回放录像"}),(0,t.jsx)("p",{className:"text-xs font-black opacity-60 mt-2",children:"欢迎联系投稿"})]})})]}),(0,t.jsxs)("div",{className:"lg:col-span-4 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4",children:[(0,t.jsx)("div",{className:"w-2 h-6 bg-[#8eb69b] rounded-full"}),(0,t.jsx)("h3",{className:"text-2xl font-black text-[#4a3728] tracking-tight",children:"时光歌切"})]}),(0,t.jsxs)("div",{className:"bg-white/40 rounded-[3rem] border-4 border-white shadow-xl overflow-hidden flex flex-col",style:{height:"540px"},children:[(0,t.jsx)("div",{className:"p-6 bg-[#f2f9f1]/40 border-b border-white",children:(0,t.jsx)("span",{className:"text-[10px] font-black text-[#8eb69b] uppercase tracking-[0.3em]",children:"Tracks from Today"})}),(0,t.jsx)("div",{className:"overflow-y-auto custom-scrollbar p-6 space-y-4 flex-1",children:I.length>0?I.map((e,s)=>(0,t.jsxs)("button",{onClick:()=>e.url&&m(z(e.url)),className:"w-full flex items-center gap-4 p-4 bg-white/60 hover:bg-white rounded-3xl border border-white transition-all group hover:shadow-md text-left",disabled:!e.url,children:[e.coverThumbnailUrl?(0,t.jsx)("div",{className:"w-10 h-10 rounded-2xl overflow-hidden shrink-0 group-hover:rotate-6 transition-transform",children:(0,t.jsx)(C,{src:e.coverThumbnailUrl,className:"w-full h-full object-cover",alt:""})}):(0,t.jsx)("div",{className:"w-10 h-10 bg-[#fef5f0] text-[#f8b195] rounded-2xl flex items-center justify-center shrink-0 group-hover:rotate-6 transition-transform",children:(0,t.jsx)(v.Music,{size:18})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h4",{className:"font-black text-[#4a3728] group-hover:text-[#f8b195] transition-colors truncate",children:e.song_name||"未命名歌曲"}),(0,t.jsx)("span",{className:"text-[9px] font-black text-[#8eb69b] uppercase tracking-widest opacity-60",children:e.performed_at})]}),e.url&&(0,t.jsx)(g.PlayCircle,{size:20,className:"text-[#f8b195] opacity-0 group-hover:opacity-100 transition-all"})]},s)):(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center py-12",children:[(0,t.jsx)(v.Music,{size:40,className:"mb-4 text-[#8eb69b] opacity-50"}),(0,t.jsx)("p",{className:"text-sm font-black text-[#8eb69b] tracking-wider",children:"暂无演唱记录"}),(0,t.jsx)("p",{className:"text-xs font-black text-[#8eb69b] opacity-60 mt-2",children:"欢迎联系投稿"})]})})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[(0,t.jsxs)("div",{className:"lg:col-span-7 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4",children:[(0,t.jsx)("div",{className:"w-2 h-6 bg-[#f8b195] rounded-full"}),(0,t.jsx)("h3",{className:"text-2xl font-black text-[#4a3728] tracking-tight",children:"瞬间定格"})]}),(0,t.jsxs)("div",{className:"bg-white/40 rounded-[3.5rem] border-4 border-white shadow-xl p-8 space-y-6",children:[(0,t.jsxs)("div",{className:"aspect-[16/10] rounded-[2.5rem] overflow-hidden bg-black/5 border-2 border-white shadow-inner relative group",children:[e.screenshots&&e.screenshots.length>0?(0,t.jsx)(C,{src:l?.thumbnailUrl||e.coverUrl||"",className:"w-full h-full object-cover animate-in fade-in zoom-in-95 duration-500",alt:"Archive"}):(0,t.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#8eb69b] bg-gray-900",children:[(0,t.jsx)(u.Image,{size:48,className:"mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-sm font-black tracking-wider",children:"暂无图片"}),(0,t.jsx)("p",{className:"text-xs font-black opacity-60 mt-2",children:"欢迎联系投稿"})]}),e.screenshots&&e.screenshots.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:D,className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 bg-white/30 hover:bg-white text-white hover:text-[#f8b195] backdrop-blur-md rounded-full transition-all opacity-0 group-hover:opacity-100 shadow-lg border border-white/40 transform active:scale-90",children:(0,t.jsx)(o.ChevronLeft,{size:24,strokeWidth:3})}),(0,t.jsx)("button",{onClick:A,className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-white/30 hover:bg-white text-white hover:text-[#f8b195] backdrop-blur-md rounded-full transition-all opacity-0 group-hover:opacity-100 shadow-lg border border-white/40 transform active:scale-90",children:(0,t.jsx)(d.ChevronRight,{size:24,strokeWidth:3})})]}),e.screenshots&&e.screenshots.length>0&&l&&(0,t.jsxs)("div",{className:"absolute bottom-4 right-4 px-3 py-1 bg-black/50 backdrop-blur-md rounded-full text-white text-[10px] font-black tracking-widest opacity-0 group-hover:opacity-100 transition-opacity",children:[e.screenshots.findIndex(e=>e.thumbnailUrl===l.thumbnailUrl)+1," / ",e.screenshots.length]})]}),e.screenshots&&e.screenshots.length>1&&(0,t.jsx)("div",{ref:j,className:"flex gap-4 overflow-x-auto pb-2 custom-scrollbar px-2",children:e.screenshots.map((e,s)=>(0,t.jsx)("button",{onClick:t=>{i(e),setTimeout(()=>{t.currentTarget.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},50)},className:`w-32 aspect-video rounded-2xl overflow-hidden shrink-0 border-4 transition-all ${l?.thumbnailUrl===e.thumbnailUrl?"border-[#f8b195] shadow-lg scale-105":"border-white opacity-60 hover:opacity-100"}`,children:(0,t.jsx)(C,{src:e.thumbnailUrl,className:"w-full h-full object-cover",alt:""})},s))})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-5 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4",children:[(0,t.jsx)("div",{className:"w-2 h-6 bg-[#8eb69b] rounded-full"}),(0,t.jsx)("h3",{className:"text-2xl font-black text-[#4a3728] tracking-tight",children:"弹幕热语"})]}),(0,t.jsx)("div",{className:"bg-white/40 rounded-[3.5rem] border-4 border-white shadow-xl p-10 flex flex-col h-full bg-gradient-to-br from-white to-[#f2f9f1]/50 backdrop-blur-md",children:(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center gap-8",children:[(0,t.jsx)("div",{className:"w-full",children:e.danmakuCloudUrl?(0,t.jsxs)("div",{className:"relative group w-full cursor-pointer",onClick:()=>h(!0),children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[#8eb69b]/20 blur-[60px] opacity-40 group-hover:opacity-100 transition-opacity"}),(0,t.jsx)("img",{src:e.danmakuCloudUrl,className:"w-full aspect-[4/3] object-cover rounded-[2.5rem] border-4 border-white shadow-2xl relative z-10 transition-transform group-hover:scale-[1.02]",alt:"Cloud"}),(0,t.jsx)("div",{className:"absolute inset-0 z-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,t.jsx)("div",{className:"w-16 h-16 bg-black/30 backdrop-blur-sm rounded-full flex items-center justify-center text-white border border-white/20 shadow-lg transform scale-75 group-hover:scale-100 transition-transform",children:(0,t.jsx)(y,{size:24})})})]}):(0,t.jsxs)("div",{className:"w-full aspect-[4/3] flex flex-col items-center justify-center text-[#8eb69b] bg-gray-900 rounded-[2.5rem] border-4 border-white shadow-2xl",children:[(0,t.jsx)(f.Cloud,{size:48,className:"mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-sm font-black tracking-wider",children:"暂无弹幕云图"}),(0,t.jsx)("p",{className:"text-xs font-black opacity-60 mt-2",children:"欢迎联系投稿"})]})}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-[#fef5f0] rounded-full text-[#f8b195] text-[10px] font-black uppercase tracking-widest border border-[#f8b195]/10",children:[(0,t.jsx)(f.Cloud,{size:14})," Emotion Analysis"]}),(0,t.jsx)("p",{className:"text-sm font-bold text-[#4a3728]/70 leading-relaxed max-w-xs mx-auto",children:"每一个跳动的热词，都是满满与粉丝间独一无二的心跳同频。"})]})]})})]})]})]}),b&&(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-xl flex items-center justify-center p-4 md:p-10 animate-in fade-in duration-300",onClick:()=>m(null),children:[(0,t.jsx)("button",{className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-50 hover:rotate-90 duration-300",onClick:()=>m(null),children:(0,t.jsx)(N.X,{size:28})}),(0,t.jsx)("div",{className:"w-full max-w-5xl aspect-video",children:(0,t.jsx)("iframe",{src:b,className:"w-full h-full rounded-2xl",allowFullScreen:!0,onClick:e=>e.stopPropagation()})}),(0,t.jsxs)("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 text-white/50 pointer-events-none",children:[(0,t.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.5em]",children:"Video Player"}),(0,t.jsx)("span",{className:"text-[10px] font-bold",children:e.date})]})]}),x&&e.danmakuCloudUrl&&(0,t.jsxs)("div",{className:"fixed inset-0 z-[200] bg-black/90 backdrop-blur-xl flex items-center justify-center p-4 md:p-10 animate-in fade-in duration-300",onClick:()=>h(!1),children:[(0,t.jsx)("button",{className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-50 hover:rotate-90 duration-300",onClick:()=>h(!1),children:(0,t.jsx)(N.X,{size:28})}),(0,t.jsx)("img",{src:e.danmakuCloudUrl,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl animate-in zoom-in-95 duration-300",alt:"Cloud Detail",onClick:e=>e.stopPropagation()}),(0,t.jsxs)("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 text-white/50 pointer-events-none",children:[(0,t.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.5em]",children:"Danmaku Cloud Analysis"}),(0,t.jsx)("span",{className:"text-[10px] font-bold",children:e.date})]})]}),(0,t.jsx)("style",{children:`
        .custom-scrollbar::-webkit-scrollbar { height: 6px; width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #8eb69b33; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #8eb69b66; }
      `})]})};function S(){return(0,t.jsxs)("div",{className:"py-48 flex flex-col items-center gap-6",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-8 border-[#f8b195]/20 border-t-[#f8b195] rounded-full animate-spin"}),(0,t.jsx)("span",{className:"text-[#8eb69b] font-black tracking-widest uppercase text-xs",children:"正在加载..."})]})}function D(){let{currentDate:e,lives:i,loading:n,error:o,changeMonth:d,setCurrentDate:x,loadLives:b,calendarCells:u,todayStr:f,minYear:p,maxYear:g}=(()=>{let[e,t]=(0,s.useState)(()=>{let e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)}),[r,a]=(0,s.useState)([]),[i,n]=(0,s.useState)(!1),[c,o]=(0,s.useState)(null),[d,x]=(0,s.useState)(2019),h=(0,s.useMemo)(()=>new Date().getFullYear(),[]),b=(0,s.useMemo)(()=>{let e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},[]),m=(0,s.useMemo)(()=>{let t=e.getFullYear(),s=e.getMonth();return{firstDay:new Date(t,s,1).getDay()||7,days:new Date(t,s+1,0).getDate()}},[e]),u=(0,s.useMemo)(()=>{let t=[];try{for(let e=1;e<m.firstDay;e++)t.push({day:null,date:""});for(let s=1;s<=m.days;s++){let a=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(s).padStart(2,"0")}`,l=Array.isArray(r)?r.find(e=>e?.date===a):void 0;t.push({day:s,date:a,live:l})}}catch(e){console.error("生成日历单元格失败:",e)}return t},[m,r,e]),f=(0,s.useCallback)(async(e,t)=>{if(!e||!t||t<1||t>12)return void o("日期参数无效");n(!0),o(null);try{let s=await l.livestreamRepository.getLivestreams({year:e,month:t,limit:100}),r=Array.isArray(s.livestreams)?s.livestreams:[];a(r)}catch(e){o(e instanceof Error?e.message:"加载失败，请稍后重试"),a([])}finally{n(!1)}},[]),p=(0,s.useCallback)(e=>{0!==e&&t(t=>{let s=new Date(t.getFullYear(),t.getMonth()+e,1),r=s.getFullYear();return r<d?new Date(d,0,1):r>h?new Date(h,11,1):s})},[d,h]),g=(0,s.useCallback)(async()=>{await f(e.getFullYear(),e.getMonth()+1)},[e,f]);return(0,s.useEffect)(()=>{(async()=>{try{let e=await l.livestreamRepository.getConfig();x(e.minYear)}catch(e){console.error("获取直播配置失败:",e)}})()},[]),(0,s.useEffect)(()=>{f(e.getFullYear(),e.getMonth()+1)},[e,f]),{currentDate:e,lives:r,loading:i,error:c,calendarCells:u,todayStr:b,minYear:d,maxYear:h,changeMonth:p,setCurrentDate:t,loadLives:f,refresh:g}})(),{selectedLive:v,handleSelectLive:j,clearSelection:w,liveDetailRef:y}=(()=>{let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(!1),i=(0,s.useRef)(null);return{selectedLive:e,handleSelectLive:(0,s.useCallback)(async e=>{if(e.live){a(!0);try{let s=await l.livestreamRepository.getLivestreamByDate(e.live.date);s?t(s):t(e.live),setTimeout(()=>{i.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(s){console.error("获取直播详情失败:",s),t(e.live)}finally{a(!1)}}},[]),clearSelection:(0,s.useCallback)(()=>{t(null)},[]),liveDetailRef:i,detailLoading:r}})();return(0,s.useEffect)(()=>{w()},[e,w]),(0,s.useEffect)(()=>{v&&(i.some(e=>e.date===v.date)||w())},[i,v,w]),(0,t.jsx)(a.ErrorBoundary,{children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-12 animate-in fade-in duration-1000",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 bg-white/40 p-6 rounded-[3rem] border-2 border-white shadow-xl backdrop-blur-md",children:[(0,t.jsx)(m,{}),(0,t.jsx)(h,{currentDate:e,onMonthChange:d,onDateChange:x,minYear:p,maxYear:g})]}),o&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-2xl text-red-600",children:[(0,t.jsx)(r.AlertCircle,{className:"w-5 h-5 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-sm font-bold",children:o})]}),n?(0,t.jsx)(S,{}):(0,t.jsx)(c,{currentDate:e,cells:u,todayStr:f,onCellClick:j,selectedDate:v?.date}),v&&!n&&(0,t.jsx)(M,{live:v})]})})}e.s(["default",()=>D],97660)}]);