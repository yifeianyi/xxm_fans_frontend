(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27927,t=>{"use strict";let e=(0,t.i(75254).default)("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);t.s(["Cloud",()=>e],27927)},91799,t=>{"use strict";let e=(0,t.i(75254).default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);t.s(["Moon",()=>e],91799)},97250,t=>{"use strict";let e=(0,t.i(75254).default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);t.s(["Sun",()=>e],97250)},39312,t=>{"use strict";let e=(0,t.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);t.s(["Zap",()=>e],39312)},25147,t=>{"use strict";let e=(0,t.i(75254).default)("gem",[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);t.s(["Gem",()=>e],25147)},43553,t=>{"use strict";let e=(0,t.i(75254).default)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);t.s(["Crown",()=>e],43553)},58377,t=>{"use strict";let e=(0,t.i(75254).default)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]);t.s(["Flame",()=>e],58377)},31674,t=>{"use strict";let e=(0,t.i(75254).default)("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);t.s(["Leaf",()=>e],31674)},81664,t=>{"use strict";let e=(0,t.i(75254).default)("feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);t.s(["Feather",()=>e],81664)},88595,t=>{"use strict";var e=t.i(43476),a=t.i(83086),r=t.i(70273),i=t.i(90597),o=t.i(27927),n=t.i(91799),s=t.i(97250),l=t.i(85162),c=t.i(39312),d=t.i(25147),m=t.i(53339),u=t.i(58377),p=t.i(43553),g=t.i(31674),h=t.i(81664);let y={default:[{icon:a.Sparkles,position:"top-20 left-10",size:"w-6 h-6",color:"text-[#f8b195]/40",animation:"animate-bounce",duration:"3s",delay:"0s"},{icon:r.Star,position:"top-32 left-20",size:"w-4 h-4",color:"text-yellow-400/50",animation:"animate-pulse",duration:"2s",delay:"0.5s"},{icon:o.Cloud,position:"top-24 right-16",size:"w-8 h-8",color:"text-[#f6d365]/30",animation:"animate-bounce",duration:"4s",delay:"1s"},{icon:n.Moon,position:"top-40 right-10",size:"w-5 h-5",color:"text-purple-300/40",animation:"animate-pulse",duration:"2s",delay:"0.3s"},{icon:i.Heart,position:"top-1/3 left-1/4",size:"w-4 h-4",color:"text-[#f67280]/30",animation:"animate-bounce",duration:"5s",delay:"0s",fill:!0},{icon:d.Gem,position:"top-1/2 right-1/4",size:"w-5 h-5",color:"text-pink-300/40",animation:"animate-pulse",duration:"2s",delay:"0.8s"},{icon:l.Flower2,position:"bottom-40 left-12",size:"w-6 h-6",color:"text-[#8eb69b]/40",animation:"animate-bounce",duration:"3.5s",delay:"0.5s"},{icon:s.Sun,position:"bottom-32 right-20",size:"w-6 h-6",color:"text-orange-300/40",animation:"animate-pulse",duration:"2s",delay:"1.2s"},{icon:c.Zap,position:"bottom-48 right-32",size:"w-4 h-4",color:"text-yellow-400/40",animation:"animate-bounce",duration:"4.5s",delay:"0s"},{icon:g.Leaf,position:"top-1/2 left-8",size:"w-5 h-5",color:"text-[#8eb69b]/35",animation:"animate-pulse",duration:"3s",delay:"0.6s"},{icon:h.Feather,position:"bottom-1/4 right-12",size:"w-5 h-5",color:"text-purple-400/30",animation:"animate-bounce",duration:"4s",delay:"1s"}],music:[{icon:m.Music,position:"top-16 left-16",size:"w-8 h-8",color:"text-[#f8b195]/50",animation:"animate-bounce",duration:"3s",delay:"0s"},{icon:a.Sparkles,position:"top-28 left-8",size:"w-5 h-5",color:"text-yellow-400/40",animation:"animate-pulse",duration:"2s",delay:"0.3s"},{icon:p.Crown,position:"top-20 right-20",size:"w-6 h-6",color:"text-yellow-500/40",animation:"animate-bounce",duration:"4s",delay:"0.5s"},{icon:r.Star,position:"top-36 right-12",size:"w-4 h-4",color:"text-[#f8b195]/50",animation:"animate-spin",duration:"3s",delay:"0s"},{icon:u.Flame,position:"top-1/3 left-12",size:"w-5 h-5",color:"text-orange-400/35",animation:"animate-pulse",duration:"2s",delay:"0.7s"},{icon:i.Heart,position:"top-1/2 right-16",size:"w-6 h-6",color:"text-[#f67280]/30",animation:"animate-bounce",duration:"5s",delay:"1s",fill:!0},{icon:d.Gem,position:"bottom-36 left-20",size:"w-5 h-5",color:"text-pink-300/40",animation:"animate-pulse",duration:"2s",delay:"0.4s"},{icon:n.Moon,position:"bottom-28 right-24",size:"w-6 h-6",color:"text-purple-300/35",animation:"animate-bounce",duration:"4s",delay:"0.8s"},{icon:o.Cloud,position:"bottom-1/3 left-1/4",size:"w-7 h-7",color:"text-[#8eb69b]/30",animation:"animate-pulse",duration:"3s",delay:"0.2s"}],gallery:[{icon:r.Star,position:"top-20 left-12",size:"w-6 h-6",color:"text-yellow-400/50",animation:"animate-pulse",duration:"2s",delay:"0s"},{icon:a.Sparkles,position:"top-32 left-24",size:"w-5 h-5",color:"text-[#f8b195]/40",animation:"animate-bounce",duration:"3s",delay:"0.4s"},{icon:s.Sun,position:"top-24 right-16",size:"w-8 h-8",color:"text-orange-300/35",animation:"animate-spin",duration:"4s",delay:"0s"},{icon:i.Heart,position:"top-40 right-8",size:"w-5 h-5",color:"text-[#f67280]/30",animation:"animate-pulse",duration:"2s",delay:"0.6s",fill:!0},{icon:d.Gem,position:"top-1/3 left-16",size:"w-4 h-4",color:"text-pink-300/40",animation:"animate-bounce",duration:"3.5s",delay:"0.8s"},{icon:l.Flower2,position:"bottom-40 right-16",size:"w-6 h-6",color:"text-[#8eb69b]/40",animation:"animate-pulse",duration:"2s",delay:"0.3s"},{icon:n.Moon,position:"bottom-32 left-20",size:"w-5 h-5",color:"text-purple-300/35",animation:"animate-bounce",duration:"4s",delay:"1s"},{icon:o.Cloud,position:"bottom-1/4 right-1/4",size:"w-6 h-6",color:"text-[#f6d365]/30",animation:"animate-pulse",duration:"3s",delay:"0.5s"}],live:[{icon:u.Flame,position:"top-16 left-14",size:"w-6 h-6",color:"text-red-400/40",animation:"animate-pulse",duration:"1.5s",delay:"0s"},{icon:p.Crown,position:"top-24 left-8",size:"w-5 h-5",color:"text-yellow-400/50",animation:"animate-bounce",duration:"3s",delay:"0.3s"},{icon:r.Star,position:"top-20 right-20",size:"w-6 h-6",color:"text-yellow-400/40",animation:"animate-spin",duration:"3s",delay:"0s"},{icon:a.Sparkles,position:"top-36 right-12",size:"w-4 h-4",color:"text-[#f8b195]/50",animation:"animate-pulse",duration:"2s",delay:"0.5s"},{icon:i.Heart,position:"top-1/3 left-10",size:"w-5 h-5",color:"text-[#f67280]/40",animation:"animate-bounce",duration:"4s",delay:"0.7s",fill:!0},{icon:c.Zap,position:"top-1/2 right-14",size:"w-5 h-5",color:"text-yellow-400/40",animation:"animate-pulse",duration:"1s",delay:"0.2s"},{icon:d.Gem,position:"bottom-36 left-16",size:"w-6 h-6",color:"text-pink-400/35",animation:"animate-bounce",duration:"3s",delay:"0.4s"},{icon:n.Moon,position:"bottom-28 right-20",size:"w-5 h-5",color:"text-purple-300/40",animation:"animate-pulse",duration:"2s",delay:"0.8s"},{icon:s.Sun,position:"bottom-1/3 left-1/4",size:"w-7 h-7",color:"text-orange-300/30",animation:"animate-bounce",duration:"4s",delay:"1s"}],data:[{icon:p.Crown,position:"top-20 left-16",size:"w-6 h-6",color:"text-yellow-400/45",animation:"animate-bounce",duration:"3s",delay:"0s"},{icon:r.Star,position:"top-28 left-8",size:"w-4 h-4",color:"text-[#f8b195]/50",animation:"animate-pulse",duration:"2s",delay:"0.3s"},{icon:d.Gem,position:"top-24 right-20",size:"w-5 h-5",color:"text-blue-400/40",animation:"animate-bounce",duration:"4s",delay:"0.5s"},{icon:a.Sparkles,position:"top-40 right-8",size:"w-5 h-5",color:"text-purple-400/40",animation:"animate-pulse",duration:"2s",delay:"0.7s"},{icon:u.Flame,position:"top-1/3 left-12",size:"w-5 h-5",color:"text-orange-400/35",animation:"animate-pulse",duration:"1.5s",delay:"0.4s"},{icon:c.Zap,position:"top-1/2 right-16",size:"w-4 h-4",color:"text-yellow-400/40",animation:"animate-bounce",duration:"2s",delay:"0.6s"},{icon:o.Cloud,position:"bottom-40 left-20",size:"w-6 h-6",color:"text-[#8eb69b]/35",animation:"animate-pulse",duration:"3s",delay:"0.2s"},{icon:n.Moon,position:"bottom-32 right-24",size:"w-5 h-5",color:"text-purple-300/35",animation:"animate-bounce",duration:"4s",delay:"0.8s"}],fans:[{icon:i.Heart,position:"top-16 left-12",size:"w-7 h-7",color:"text-[#f67280]/45",animation:"animate-pulse",duration:"2s",delay:"0s",fill:!0},{icon:r.Star,position:"top-28 left-20",size:"w-5 h-5",color:"text-yellow-400/50",animation:"animate-bounce",duration:"3s",delay:"0.3s"},{icon:a.Sparkles,position:"top-20 right-16",size:"w-6 h-6",color:"text-[#f8b195]/40",animation:"animate-pulse",duration:"2s",delay:"0.5s"},{icon:d.Gem,position:"top-36 right-10",size:"w-5 h-5",color:"text-pink-400/40",animation:"animate-bounce",duration:"4s",delay:"0.7s"},{icon:p.Crown,position:"top-1/3 left-8",size:"w-5 h-5",color:"text-yellow-500/40",animation:"animate-bounce",duration:"3s",delay:"1s"},{icon:l.Flower2,position:"bottom-36 right-16",size:"w-6 h-6",color:"text-[#8eb69b]/40",animation:"animate-pulse",duration:"2s",delay:"0.4s"},{icon:n.Moon,position:"bottom-28 left-20",size:"w-5 h-5",color:"text-purple-300/35",animation:"animate-bounce",duration:"4s",delay:"0.6s"},{icon:s.Sun,position:"bottom-1/4 right-1/4",size:"w-6 h-6",color:"text-orange-300/30",animation:"animate-pulse",duration:"3s",delay:"0.2s"}]},f=({theme:t="default",className:a="",showGlow:r=!0,glowColors:i=["#f8b195","#f6d365"]})=>{let o=y[t]||y.default;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:`fixed inset-0 pointer-events-none overflow-hidden -z-5 ${a}`,children:o.map((t,a)=>{let r=t.icon;return(0,e.jsx)("div",{className:`absolute ${t.position} ${t.animation} ${t.size} ${t.color}`,style:{animationDuration:t.duration,animationDelay:t.delay},children:"fill"in t&&t.fill?(0,e.jsx)(r,{className:"w-full h-full fill-current"}):(0,e.jsx)(r,{className:"w-full h-full"})},a)})}),r&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"fixed top-0 left-0 w-[600px] h-[600px] rounded-full blur-[120px] -translate-x-1/2 -translate-y-1/2 pointer-events-none -z-10 opacity-10",style:{backgroundColor:i[0]}}),(0,e.jsx)("div",{className:"fixed bottom-0 right-0 w-[500px] h-[500px] rounded-full blur-[100px] translate-x-1/3 translate-y-1/3 pointer-events-none -z-10 opacity-10",style:{backgroundColor:i[1]}})]})]})};t.s(["CornerDecoration",0,({position:t,className:a=""})=>(0,e.jsx)("div",{className:`absolute ${{"top-left":"top-0 left-0 -translate-x-1/2 -translate-y-1/2","top-right":"top-0 right-0 translate-x-1/2 -translate-y-1/2","bottom-left":"bottom-0 left-0 -translate-x-1/2 translate-y-1/2","bottom-right":"bottom-0 right-0 translate-x-1/2 translate-y-1/2"}[t]} ${a}`,children:(0,e.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-[#f8b195]/20 to-transparent rounded-full blur-xl"})}),"DecorativeDivider",0,({className:t=""})=>(0,e.jsxs)("div",{className:`flex items-center justify-center gap-3 py-8 ${t}`,children:[(0,e.jsx)("div",{className:"h-px w-16 bg-gradient-to-r from-transparent to-[#f8b195]/50"}),(0,e.jsx)(a.Sparkles,{className:"w-4 h-4 text-[#f8b195] animate-pulse"}),(0,e.jsx)("div",{className:"h-px w-16 bg-gradient-to-l from-transparent to-[#f8b195]/50"})]}),"FloatingNotes",0,({count:t=5})=>(0,e.jsx)("div",{className:"fixed inset-0 pointer-events-none overflow-hidden -z-5",children:[{icon:"♪",left:"10%",delay:"0s",duration:"6s"},{icon:"♫",left:"25%",delay:"1s",duration:"7s"},{icon:"♬",left:"50%",delay:"2s",duration:"5s"},{icon:"♭",left:"75%",delay:"1.5s",duration:"6.5s"},{icon:"♮",left:"90%",delay:"0.5s",duration:"5.5s"}].slice(0,t).map((t,a)=>(0,e.jsx)("div",{className:"absolute text-[#f8b195]/20 text-2xl animate-float-note",style:{left:t.left,bottom:"-50px",animationDelay:t.delay,animationDuration:t.duration},children:t.icon},a))}),"PageDecorations",0,f,"TitleDecoration",0,({icon:t,className:r=""})=>(0,e.jsxs)("div",{className:`flex items-center justify-center gap-2 ${r}`,children:[(0,e.jsx)("div",{className:"h-px w-8 bg-gradient-to-r from-transparent to-[#f8b195]"}),t||(0,e.jsx)(a.Sparkles,{className:"w-4 h-4 text-[#f8b195]"}),(0,e.jsx)("div",{className:"h-px w-8 bg-gradient-to-l from-transparent to-[#f8b195]"})]}),"decorationConfigs",0,y,"default",0,f])},48317,18110,t=>{"use strict";var e=t.i(47167);class a extends Error{status;code;constructor(t,e,a){super(e),this.status=t,this.code=a,this.name="ApiError"}}t.s(["ApiError",()=>a],18110);class r{baseURL;constructor(t){this.baseURL=t||i()}async request(t,e){try{let r=this.baseURL.endsWith("/")?this.baseURL:`${this.baseURL}/`,i=t.startsWith("/")?t.slice(1):t,o=`${r}${i}`,n=await fetch(o,{...e,headers:{"Content-Type":"application/json",...e?.headers}});if(!n.ok)throw new a(n.status,`Request failed: ${n.statusText}`);let s=await n.json();if(s&&"object"==typeof s&&"code"in s)if(200===s.code)return{data:s.data};else throw new a(s.code,s.message||"Request failed");return{data:s}}catch(t){if(t instanceof a)return{error:t};return{error:new a(500,"Network error")}}}async get(t){return this.request(t,{method:"GET"})}async post(t,e){return this.request(t,{method:"POST",body:JSON.stringify(e)})}async put(t,e){return this.request(t,{method:"PUT",body:JSON.stringify(e)})}async delete(t){return this.request(t,{method:"DELETE"})}}function i(){return e.default.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000/api"}async function o(t,e){let r=i(),o=r.endsWith("/")?r:`${r}/`,n=t.startsWith("/")?t.slice(1):t,s=`${o}${n}`;try{let t={...e,headers:{"Content-Type":"application/json",...e?.headers}};e?.revalidate!==void 0&&(t.next={revalidate:e.revalidate});let r=await fetch(s,t);if(!r.ok)throw new a(r.status,`Request failed: ${r.statusText}`);let i=await r.json();if(i&&"object"==typeof i&&"code"in i)if(200===i.code)return{data:i.data};else throw new a(i.code,i.message||"Request failed");return{data:i}}catch(t){if(t instanceof a)return{error:t};return{error:new a(500,"Network error")}}}async function n(t,e){return o(t,{method:"GET",revalidate:e})}function s(t){if(!t)return"";if(t.startsWith("http://")||t.startsWith("https://"))return t;let a=t.startsWith("/")?t:`/${t}`,r=(e.default.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000/api").replace(/\/api\/?$/,"");return`${r}${a}`}t.s(["ApiClient",()=>r,"get",()=>n,"getFullCoverUrl",()=>s],48317)},63059,t=>{"use strict";let e=(0,t.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);t.s(["ChevronRight",()=>e],63059)},78514,53919,79519,46852,t=>{"use strict";var e=t.i(48317);class a{static fromBackend(t){return{id:t.id?.toString()||"",name:t.song_name||"未知歌曲",originalArtist:t.singer||"未知歌手",genres:Array.isArray(t.styles)?t.styles:[],languages:t.language?[t.language]:[],firstPerformance:t.first_perform||"",lastPerformance:t.last_performed||t.last_perform||"",performanceCount:t.perform_count||0,tags:Array.isArray(t.tags)?t.tags:[]}}static fromBackendList(t){return Array.isArray(t)?t.map(t=>this.fromBackend(t)):(console.warn("SongMapper.fromBackendList: expected array, got",typeof t),[])}static recordFromBackend(t,a){let r=t.cover_url||t.cover||"";return{id:t.id?.toString()||"",songId:a,songName:t.song_name||"",date:t.performed_at||"",cover:(0,e.getFullCoverUrl)(r),coverThumbnailUrl:(0,e.getFullCoverUrl)(t.cover_thumbnail_url||r),note:t.notes||t.note||"",videoUrl:t.url||t.video_url||""}}static recordListFromBackend(t,e){return Array.isArray(t)?t.map(t=>this.recordFromBackend(t,e)):(console.warn("SongMapper.recordListFromBackend: expected array, got",typeof t),[])}static originalWorkFromBackend(t){return{title:t.title||"",date:t.date||"",desc:t.desc||"",cover:(0,e.getFullCoverUrl)(t.cover),songId:t.songId||t.song_id||"",neteaseId:t.neteaseId||t.netease_id||"",bilibiliBvid:t.bilibiliBvid||t.bilibili_bvid||t.bvid||"",featured:t.featured||!1}}static originalWorkListFromBackend(t){return Array.isArray(t)?t.map(t=>this.originalWorkFromBackend(t)):(console.warn("SongMapper.originalWorkListFromBackend: expected array, got",typeof t),[])}static recommendationFromBackend(t){let e=Array.isArray(t)?t.find(t=>t.is_active)||t[0]:t;if(!e)return{content:"",recommendedSongs:[],recommendedSongsDetails:[]};let a=e.recommended_songs_details?.map(t=>({id:t.id?.toString()||"",name:t.song_name||"未知歌曲",singer:t.singer||"未知歌手",language:t.language||"未知语种"}))||[];return{content:e.content||"",recommendedSongs:e.recommended_songs?.map(t=>t.id?.toString()||"")||[],recommendedSongsDetails:a}}static mapSortField(t){return({count:"perform_count",first:"first_perform",last:"last_performed",name:"song_name",artist:"singer"})[t]||t}static buildOrderingParam(t,e){let a=this.mapSortField(t);return"asc"===e?a:`-${a}`}}let r=new class{apiClient;constructor(t){this.apiClient=t||new e.ApiClient}buildQueryParams(t){let e=new URLSearchParams;return t.q&&e.set("q",t.q),t.page&&e.set("page",t.page.toString()),t.limit&&e.set("limit",t.limit.toString()),t.ordering&&e.set("ordering",t.ordering),t.styles&&e.set("styles",t.styles),t.tags&&e.set("tags",t.tags),t.language&&e.set("language",t.language),e}async getSongs(t={}){let e=this.buildQueryParams(t),r=await this.apiClient.get(`/songs/?${e.toString()}`);if(r.error)throw r.error;let i=r.data,o=a.fromBackendList(i.results||[]);return{total:i.total||o.length,page:i.page||t.page||1,page_size:i.page_size||t.limit||20,results:o}}async getSongById(t){let e=await this.apiClient.get(`/songs/${t}/`);if(e.error)throw e.error;return a.fromBackend(e.data)}async getRecords(t,e){let r,i,o=new URLSearchParams;e?.page&&o.set("page",e.page.toString()),e?.page_size&&o.set("page_size",e.page_size.toString());let n=await this.apiClient.get(`/songs/${t}/records/?${o.toString()}`);if(n.error)throw n.error;let s=n.data;if(Array.isArray(s))r=s,i=s.length;else{if(!(s.results&&Array.isArray(s.results)))return console.warn("SongRepository.getRecords: unexpected data format",s),{results:[],total:0,page:1,page_size:10};r=s.results,i=s.total||s.results.length}return{results:a.recordListFromBackend(r,t),total:i,page:s.page||1,page_size:s.page_size||10}}async getStyles(){let t=await this.apiClient.get("/styles/");if(t.error)throw t.error;return t.data?.styles||[]}async getTags(){let t=await this.apiClient.get("/tags/");if(t.error)throw t.error;return t.data?.tags||[]}async getTopSongs(t){let e=new URLSearchParams;t?.range&&e.set("range",t.range),t?.limit&&e.set("limit",t.limit.toString());let r=await this.apiClient.get(`/top_songs/?${e.toString()}`);if(r.error)throw r.error;return a.fromBackendList(r.data||[])}async getOriginalWorks(){let t=await this.apiClient.get("/original-works/");if(t.error)throw t.error;return a.originalWorkListFromBackend(t.data||[])}async getRandomSong(){let t=await this.apiClient.get("/random-song/");if(t.error)throw t.error;return a.fromBackend(t.data)}async getRecommendation(){let t=await this.apiClient.get("/site-settings/");if(t.error)throw t.error;return a.recommendationFromBackend(t.data)}async getFilterOptions(){let[t,e]=await Promise.all([this.getStyles(),this.getTags()]);return{styles:t,tags:e,languages:["国语","粤语","英语","日语","韩语","其他"]}}};t.s(["songRepository",0,r],53919);class i{static fromBackend(t){return{id:t.id?.toString()||"",title:t.title||"",description:t.description||"",coverUrl:(0,e.getFullCoverUrl)(t.cover_url),coverThumbnailUrl:(0,e.getFullCoverUrl)(t.cover_thumbnail_url||t.cover_url),level:t.level||0,imageCount:t.image_count||0,folderPath:t.folder_path||"",tags:Array.isArray(t.tags)?t.tags:[],isLeaf:t.is_leaf??!0,children:t.children?this.fromBackendList(t.children):void 0,breadcrumbs:t.breadcrumbs?this.breadcrumbsFromBackend(t.breadcrumbs):void 0,createdAt:t.created_at||""}}static fromBackendList(t){return Array.isArray(t)?t.map(t=>this.fromBackend(t)):(console.warn("GalleryMapper.fromBackendList: expected array, got",typeof t),[])}static breadcrumbsFromBackend(t){return Array.isArray(t)?t.map(t=>({id:t.id?.toString()||"",title:t.title||""})):[]}static imageFromBackend(t){return{id:t.id?.toString()||"",url:(0,e.getFullCoverUrl)(t.url),thumbnailUrl:(0,e.getFullCoverUrl)(t.thumbnail_url||t.url),title:t.title||"",filename:t.filename||"",isGif:t.is_gif||!1,isVideo:t.is_video||!1}}static imageListFromBackend(t){return Array.isArray(t)?t.map(t=>this.imageFromBackend(t)):(console.warn("GalleryMapper.imageListFromBackend: expected array, got",typeof t),[])}static buildTree(t,e){return e?t.filter(t=>t.breadcrumbs?.some(t=>t.id===e)):t}}let o=new class{apiClient;constructor(t){this.apiClient=t||new e.ApiClient}async getGalleries(t={}){let e=new URLSearchParams;t.parentId&&e.set("parent",t.parentId),t.page&&e.set("page",t.page.toString()),t.limit&&e.set("limit",t.limit.toString());let a=await this.apiClient.get(`/gallery/tree/?${e.toString()}`);if(a.error)throw a.error;return i.fromBackendList(a.data||[])}async getGalleryById(t){let e=await this.apiClient.get(`/gallery/${t}/`);if(e.error)throw e.error;return i.fromBackend(e.data)}async getGalleryImages(t,e){let a=new URLSearchParams;e?.page&&a.set("page",e.page.toString()),e?.page_size&&a.set("page_size",e.page_size.toString());let r=await this.apiClient.get(`/gallery/${t}/images/?${a.toString()}`);if(r.error)throw r.error;let o=r.data;return Array.isArray(o)?{images:i.imageListFromBackend(o),total:o.length}:{images:i.imageListFromBackend(o.images||[]),total:o.total||o.images?.length||0}}async getGalleryBreadcrumbs(t){let e=await this.apiClient.get(`/gallery/${t}/`);if(e.error)throw e.error;return i.fromBackend(e.data).breadcrumbs||[]}async syncGallery(t){let e=await this.apiClient.post(`/gallery/${t}/sync/`,{});return e.error?{success:!1,message:e.error.message||"同步失败"}:{success:!0,message:"同步成功"}}async getChildrenImages(t){let e=await this.apiClient.get(`/gallery/${t}/children-images/`);if(e.error)throw e.error;let a=e.data;return a.images?{children:[{gallery:i.fromBackend(a.gallery),images:i.imageListFromBackend(a.images)}],totalGalleries:1,totalImages:a.total||a.images.length}:{children:(a.children||[]).map(t=>({gallery:i.fromBackend(t.gallery),images:i.imageListFromBackend(t.images||[])})),totalGalleries:a.total_galleries||0,totalImages:a.total_images||0}}};t.s(["galleryRepository",0,o],79519);class n{static fromBackend(t){return{id:t.id?.toString()||"",date:t.date||"",title:t.title||void 0,summary:t.summary||void 0,viewCount:(t.viewCount??t.view_count)?.toString(),danmakuCount:(t.danmakuCount??t.danmaku_count)?.toString(),startTime:t.startTime??t.start_time,endTime:t.endTime??t.end_time,duration:t.duration,bvid:t.bvid,parts:t.parts,coverUrl:(0,e.getFullCoverUrl)(t.coverUrl??t.cover_url),recordings:t.recordings?this.recordingsFromBackend(t.recordings):void 0,songCuts:this.songCutsFromBackend(t.songCuts??t.song_cuts),screenshots:t.screenshots?this.screenshotsFromBackend(t.screenshots):void 0,danmakuCloudUrl:t.danmakuCloudUrl??t.danmaku_cloud_url}}static fromBackendList(t){return Array.isArray(t)?t.map(t=>this.fromBackend(t)):(console.warn("LivestreamMapper.fromBackendList: expected array, got",typeof t),[])}static recordingsFromBackend(t){return Array.isArray(t)?t.map(t=>({title:t.title||"",url:t.url||""})):[]}static songCutsFromBackend(t){return t&&Array.isArray(t)?t.map(t=>({performed_at:t.performed_at||"",song_name:t.song_name||"",url:t.url||"",coverThumbnailUrl:(0,e.getFullCoverUrl)(t.coverThumbnailUrl??t.cover_thumbnail_url)})):[]}static screenshotsFromBackend(t){return t&&Array.isArray(t)?t.map(t=>({url:(0,e.getFullCoverUrl)(t.url),thumbnailUrl:(0,e.getFullCoverUrl)(t.thumbnailUrl??t.thumbnail_url??t.url)})):[]}static calendarFromBackend(t){return Array.isArray(t)?t.map(t=>({date:t.date||"",hasLivestream:t.has_livestream||!1,livestreamId:t.livestream_id?.toString(),title:t.title})):(console.warn("LivestreamMapper.calendarFromBackend: expected array, got",typeof t),[])}static segmentsFromBackend(t){return Array.isArray(t)?t.map(t=>({part:t.part||1,title:t.title||"",url:t.url||"",duration:t.duration})):[]}static formatDuration(t){if(!t)return"";let e=t.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!e)return t;let a=parseInt(e[1]||"0"),r=parseInt(e[2]||"0"),i=parseInt(e[3]||"0"),o=[];return a>0&&o.push(`${a}小时`),r>0&&o.push(`${r}分钟`),i>0&&0===a&&o.push(`${i}秒`),o.join("")||t}}let s=new class{apiClient;constructor(t){this.apiClient=t||new e.ApiClient}async getLivestreams(t={}){let e=new URLSearchParams;t.page&&e.set("page",t.page.toString()),t.limit&&e.set("limit",t.limit.toString()),t.year&&e.set("year",t.year.toString()),t.month&&e.set("month",t.month.toString());let a=await this.apiClient.get(`/livestreams/?${e.toString()}`);if(a.error)throw a.error;let r=a.data,i=r;return(r&&"object"==typeof r&&"code"in r&&(i=r.data),Array.isArray(i))?{livestreams:n.fromBackendList(i),total:i.length}:{livestreams:n.fromBackendList(i?.results||[]),total:i?.total||i?.results?.length||0}}async getLivestreamById(t){let e=await this.apiClient.get(`/livestreams/${t}/`);if(e.error)throw e.error;let a=e.data?.data||e.data;return n.fromBackend(a)}async getLivestreamByDate(t){let e=await this.apiClient.get(`/livestreams/${t}/`);if(e.error){if(e.error.message?.includes("404"))return null;throw e.error}let a=e.data?.data!==void 0?e.data.data:e.data;return a?n.fromBackend(a):null}async getCalendar(t,e){return(await this.getLivestreams({year:t,month:e})).livestreams.map(t=>({date:t.date,hasLivestream:!0,livestreamId:t.id,title:t.title}))}async getSegments(t){let e=await this.apiClient.get(`/livestreams/${t}/segments/`);return e.error?[]:n.segmentsFromBackend(e.data||[])}async getSongCuts(t){let e=await this.apiClient.get(`/livestreams/${t}/song-cuts/`);return e.error?[]:n.songCutsFromBackend(e.data||[])}async getScreenshots(t){let e=await this.apiClient.get(`/livestreams/${t}/screenshots/`);return e.error?[]:n.screenshotsFromBackend(e.data||[])}async getRecentLivestreams(t=5){let e=await this.apiClient.get(`/livestreams/?limit=${t}&ordering=-date`);if(e.error)throw e.error;let a=e.data?.data!==void 0?e.data.data:e.data;return Array.isArray(a)?n.fromBackendList(a):n.fromBackendList(a?.results||[])}async getConfig(){let t=await this.apiClient.get("/livestreams/config/");if(t.error)return{minYear:2019};let e=t.data?.data!==void 0?t.data.data:t.data;return{minYear:e?.minYear||2019}}};t.s(["livestreamRepository",0,s],46852);class l{static collectionFromBackend(t){return{id:t.id?.toString()||"",name:t.name||"",description:t.description||"",worksCount:t.works_count||0}}static collectionListFromBackend(t){return Array.isArray(t)?t.map(t=>this.collectionFromBackend(t)):(console.warn("FansDIYMapper.collectionListFromBackend: expected array, got",typeof t),[])}static workFromBackend(t){let a=t.cover||"";return{id:t.id?.toString()||"",title:t.title||"",author:t.author||"",cover:(0,e.getFullCoverUrl)(a),coverThumbnailUrl:(0,e.getFullCoverUrl)(t.cover_thumbnail_url||a),videoUrl:t.video_url||"",note:t.note||"",collectionId:t.collection_id?.toString()||"",position:t.position||0}}static workListFromBackend(t){return Array.isArray(t)?t.map(t=>this.workFromBackend(t)):(console.warn("FansDIYMapper.workListFromBackend: expected array, got",typeof t),[])}}new class{apiClient;constructor(t){this.apiClient=t||new e.ApiClient}async getCollections(t={}){let e=new URLSearchParams;t.page&&e.set("page",t.page.toString()),t.limit&&e.set("limit",t.limit.toString());let a=await this.apiClient.get(`/fansDIY/collections/?${e.toString()}`);if(a.error)throw a.error;let r=a.data;return Array.isArray(r)?{collections:l.collectionListFromBackend(r),total:r.length}:{collections:l.collectionListFromBackend(r.results||[]),total:r.total||r.results?.length||0}}async getCollectionById(t){let e=await this.apiClient.get(`/fansDIY/collections/${t}/`);if(e.error)throw e.error;return l.collectionFromBackend(e.data)}async getWorks(t={}){let e=new URLSearchParams;t.page&&e.set("page",t.page.toString()),t.limit&&e.set("limit",t.limit.toString()),t.collection&&e.set("collection",t.collection);let a=await this.apiClient.get(`/fansDIY/works/?${e.toString()}`);if(a.error)throw a.error;let r=a.data;return Array.isArray(r)?{works:l.workListFromBackend(r),total:r.length}:{works:l.workListFromBackend(r.results||[]),total:r.total||r.results?.length||0}}async getWorkById(t){let e=await this.apiClient.get(`/fansDIY/works/${t}/`);if(e.error)throw e.error;return l.workFromBackend(e.data)}async getWorksByCollection(t,e={}){return this.getWorks({...e,collection:t})}};class c{static dataPointFromBackend(t){return{time:t.time||"",value:t.value||0,delta:t.delta||0}}static dataPointListFromBackend(t){return Array.isArray(t)?t.map(t=>this.dataPointFromBackend(t)):[]}static historyFromBackend(t){if(!t||"object"!=typeof t)return{DAY:[],WEEK:[],MONTH:[]};let e={DAY:[],WEEK:[],MONTH:[]};for(let[a,r]of Object.entries(t)){let t=a.toUpperCase();t in e&&(e[t]=this.dataPointListFromBackend(r))}return e}static accountDataFromBackend(t){return{id:t.id?.toString()||"",name:t.name||"",totalFollowers:t.totalFollowers||t.total_followers||0,history:this.historyFromBackend(t.history)}}static accountDataListFromBackend(t){return Array.isArray(t)?t.map(t=>this.accountDataFromBackend(t)):[]}static videoStatsFromBackend(t){let a={DAY:{views:[],likes:[],danmaku:[]},WEEK:{views:[],likes:[],danmaku:[]},MONTH:{views:[],likes:[],danmaku:[]}};if(t.metrics)for(let[e,r]of Object.entries(t.metrics))a[e.toUpperCase()]={views:this.dataPointListFromBackend(r.views||[]),likes:this.dataPointListFromBackend(r.likes||[]),danmaku:this.dataPointListFromBackend(r.danmaku||[])};return{id:t.id?.toString()||"",title:t.title||"",cover:(0,e.getFullCoverUrl)(t.cover),publishTime:t.publish_time||"",duration:t.duration||"",views:t.views||0,guestRatio:t.guest_ratio||0,fanWatchRate:t.fan_watch_rate||0,followerGrowth:t.follower_growth||0,likes:t.likes||0,comments:t.comments||0,danmaku:t.danmaku||0,favs:t.favs||0,metrics:a}}static videoStatsListFromBackend(t){return Array.isArray(t)?t.map(t=>this.videoStatsFromBackend(t)):(console.warn("AnalyticsMapper.videoStatsListFromBackend: expected array, got",typeof t),[])}static correlationDataFromBackend(t){return{time:t.time||"",videoViewDelta:t.video_view_delta||0,followerDelta:t.follower_delta||0}}static correlationDataListFromBackend(t){return Array.isArray(t)?t.map(t=>this.correlationDataFromBackend(t)):[]}static accountItemFromBackend(t){return{id:t.id?.toString()||"",name:t.name||"",platform:t.platform||""}}static followerOverviewFromBackend(t){return t?{totalFollowers:t.total_followers||0,todayGrowth:t.today_growth||0,weekGrowth:t.week_growth||0,monthGrowth:t.month_growth||0}:{totalFollowers:0,todayGrowth:0,weekGrowth:0,monthGrowth:0}}static formatNumber(t){return t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"k":t.toString()}}new class{apiClient;constructor(t){this.apiClient=t||new e.ApiClient}async getAccounts(){let t=await this.apiClient.get("/data-analytics/followers/accounts/");if(t.error)throw t.error;return(t.data||[]).map(t=>c.accountItemFromBackend(t))}async getAllAccountsData(t="WEEK",e=30){let a=new URLSearchParams;a.set("granularity",t),a.set("days",e.toString());let r=await this.apiClient.get(`/data-analytics/followers/accounts/data/?${a.toString()}`);if(r.error)throw r.error;return c.accountDataListFromBackend(r.data||[])}async getAccountData(t){let e=new URLSearchParams;e.set("account_id",t.accountId),t.granularity&&e.set("granularity",t.granularity);let a=30;"DAY"===t.granularity&&(a=720),e.set("days",a.toString()),t.startDate&&e.set("start_date",t.startDate),t.endDate&&e.set("end_date",t.endDate);let r=await this.apiClient.get(`/data-analytics/followers/accounts/${t.accountId}/?${e.toString()}`);if(r.error)throw r.error;return c.accountDataFromBackend(r.data)}async getFollowerOverview(){let t=await this.apiClient.get("/data-analytics/followers/overview/");if(t.error)throw t.error;return c.followerOverviewFromBackend(t.data)}async getVideoStats(t){let e=new URLSearchParams;t.granularity&&e.set("granularity",t.granularity);let a=await this.apiClient.get(`/data-analytics/works/bilibili/${t.videoId}/metrics/?${e.toString()}`);if(a.error)throw a.error;return c.videoStatsFromBackend(a.data)}async getVideos(t){let e=new URLSearchParams;t?.page&&e.set("page",t.page.toString()),t?.limit&&e.set("limit",t.limit.toString()),t?.sortBy&&e.set("sort_by",t.sortBy);let a=await this.apiClient.get(`/data-analytics/works/?${e.toString()}`);if(a.error)throw a.error;let r=a.data;return Array.isArray(r)?{videos:c.videoStatsListFromBackend(r),total:r.length}:{videos:c.videoStatsListFromBackend(r.results||[]),total:r.total||r.results?.length||0}}async getCorrelationData(t){let e=new URLSearchParams;t?.startDate&&e.set("start_date",t.startDate),t?.endDate&&e.set("end_date",t.endDate);let a=await this.apiClient.get(`/data-analytics/platform/bilibili/correlation/?${e.toString()}`);if(a.error)throw a.error;return c.correlationDataListFromBackend(a.data||[])}},t.s([],78514)}]);