module.exports=[76208,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(92e3);a.i(11);var e=a.i(16618);a.i(76990);var f=a.i(67578);let g=({cell:a,todayStr:c,isSelected:d,onClick:e})=>{let f=a.date===c,g=!!a.live?.date;return(0,b.jsxs)("div",{onClick:()=>{g&&a.live&&e()},onKeyDown:a=>{g&&("Enter"===a.key||" "===a.key)&&(a.preventDefault(),e())},className:`aspect-video flex items-center justify-center relative z-0 rounded-2xl transition-all ${a.day?"bg-white/60":"bg-transparent"} ${g?"cursor-pointer hover:bg-[#fef5f0] shadow-sm":""} ${d?"bg-[#fef5f0] ring-4 ring-[#f8b195]/20":""} ${f?"ring-2 ring-[#8eb69b]/50":""}`,role:g?"button":"gridcell",tabIndex:g?0:void 0,"aria-label":g?`${a.date}有直播记录`:a.date,"aria-selected":d,children:[(0,b.jsx)("span",{className:`text-sm font-black ${g?"text-[#f8b195]":f?"text-[#8eb69b] font-bold":"text-[#4a3728]/40"}`,children:a.day}),g&&(0,b.jsx)("div",{className:"absolute bottom-1 w-1 h-1 rounded-full bg-[#f8b195]","aria-hidden":"true"}),f&&(0,b.jsx)("div",{className:"absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-[#8eb69b]","aria-hidden":"true"})]})},h=["一","二","三","四","五","六","日"],i=({currentDate:a,cells:c,todayStr:d,onCellClick:e,selectedDate:f})=>(0,b.jsxs)("div",{className:"relative z-0 grid grid-cols-7 gap-1 bg-white/30 p-2 rounded-[2.5rem] border border-white/50 shadow-inner",children:[h.map((a,c)=>(0,b.jsx)("div",{className:`py-2 text-center text-[10px] font-black uppercase tracking-widest ${c>=5?"text-[#f67280]":"text-[#8eb69b]"}`,"aria-label":`星期${a}`,children:a},a)),c.map((a,c)=>(0,b.jsx)(g,{cell:a,todayStr:d,isSelected:f===a.date,onClick:()=>e(a)},c))]});var j=a.i(13749),k=a.i(50522),l=a.i(35112);let m=({currentDate:a,onMonthChange:d,onDateChange:e,minYear:f=2019,maxYear:g})=>{let[h,i]=(0,c.useState)(!1),[m,n]=(0,c.useState)(a.getFullYear()),[o,p]=(0,c.useState)(a.getMonth()),[q,r]=(0,c.useState)(!1),s=(0,c.useRef)(null),t=g||new Date().getFullYear(),u=(0,c.useMemo)(()=>Array.from({length:t-f+1},(a,b)=>f+b),[f,t]);(0,c.useEffect)(()=>{r(!0)},[]),(0,c.useEffect)(()=>{h&&(n(a.getFullYear()),p(a.getMonth()))},[h,a]),(0,c.useEffect)(()=>{let a=a=>{s.current&&!s.current.contains(a.target)&&i(!1)};return h&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[h]);let v=h&&q?(0,l.createPortal)((0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm",style:{zIndex:9999},onClick:()=>i(!1)}),(0,b.jsxs)("div",{ref:s,className:"fixed bg-white rounded-[2rem] shadow-[0_8px_32px_rgba(0,0,0,0.12)] border-2 border-[#f2f9f1] p-5 w-[320px] max-w-[calc(100vw-40px)]",style:{zIndex:1e4,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("div",{className:"text-xs font-black text-[#8eb69b] uppercase tracking-[0.2em] mb-2",children:"Year"}),(0,b.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:u.map(a=>(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),n(a),e(new Date(a,o,1))},className:`h-12 flex items-center justify-center rounded-xl text-sm font-black transition-all ${m===a?"bg-[#d97706] text-white shadow-lg shadow-[#d97706]/30":"bg-gray-50 text-gray-600 hover:bg-gray-100 hover:text-gray-800"}`,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-black text-[#8eb69b] uppercase tracking-[0.2em] mb-2",children:"Month"}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-3",children:Array.from({length:12},(a,b)=>b+1).map(a=>(0,b.jsx)("button",{onClick:b=>{var c;b.stopPropagation(),p(c=a-1),e(new Date(m,c,1)),i(!1)},className:`h-12 flex items-center justify-center rounded-xl text-sm font-black transition-all ${o===a-1?"bg-[#d97706] text-white shadow-lg shadow-[#d97706]/30":"bg-gray-50 text-gray-600 hover:bg-gray-100 hover:text-gray-800"}`,children:a},a))})]})]})]}),document.body):null;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 bg-white/60 p-2 rounded-3xl border border-white",children:[(0,b.jsx)("button",{onClick:()=>d(-1),className:"p-3 hover:bg-white rounded-2xl text-[#8eb69b] transition-all","aria-label":"上个月",children:(0,b.jsx)(j.ChevronLeft,{size:20})}),(0,b.jsxs)("button",{onClick:()=>i(!h),className:"px-4 py-2 hover:bg-white rounded-2xl text-[#4a3728] font-black tabular-nums transition-all flex items-center gap-2","aria-label":"选择年月",children:[a.getFullYear(),"年 ",a.getMonth()+1,"月",(0,b.jsx)(k.ChevronRight,{size:14,className:`transform transition-transform ${h?"rotate-90":""}`})]}),(0,b.jsx)("button",{onClick:()=>d(1),className:"p-3 hover:bg-white rounded-2xl text-[#8eb69b] transition-all","aria-label":"下个月",children:(0,b.jsx)(k.ChevronRight,{size:20})}),(0,b.jsx)("button",{onClick:()=>{let a=new Date;e(new Date(a.getFullYear(),a.getMonth(),1)),i(!1)},className:"px-4 py-2 bg-gray-50 hover:bg-[#d97706] hover:text-white rounded-2xl text-gray-600 font-black transition-all flex items-center gap-2 border border-gray-200","aria-label":"回到今天",children:"今天"})]}),v]})};var n=a.i(41675);let o=({title:a="直播纪事",description:c="The Forest Archives"})=>(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsx)("div",{className:"bg-[#f8b195] text-white p-4 rounded-3xl shadow-lg shadow-[#f8b195]/20 animate-pulse",children:(0,b.jsx)(n.Calendar,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-black text-[#4a3728] tracking-tighter",children:a}),(0,b.jsx)("p",{className:"text-xs text-[#8eb69b] font-black uppercase tracking-[0.2em]",children:c})]})]});var p=a.i(38632),q=a.i(35133),r=a.i(76472),s=a.i(34012),t=a.i(16686),u=a.i(70106);let v=(0,u.default)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),w=(0,u.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),x=(0,u.default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);var y=a.i(33508);function z({src:a,alt:d,placeholder:e="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjVmNWY1Ii8+PC9zdmc+",className:f="",style:g={},onLoad:h,onError:i}){let[j,k]=(0,c.useState)(e),[l,m]=(0,c.useState)(!1),n=(0,c.useRef)(null);return(0,c.useEffect)(()=>{k(a)},[a]),(0,b.jsx)("img",{ref:n,src:j,alt:d,className:f,style:{...g,opacity:l?1:.5,transition:"opacity 0.3s ease-in-out"},onLoad:()=>{m(!0),h?.()},onError:()=>{k(e),i?.()}})}function A(a){if(!a)return"";let b=a.match(/BV[\w]+/);if(!b)return a;let c=b[0],d=a.match(/[?&]p=(\d+)/),e=d?d[1]:"1";return`https://player.bilibili.com/player.html?bvid=${c}&page=${e}`}let B=({live:a})=>{let[d,e]=(0,c.useState)(0),[f,g]=(0,c.useState)(a.screenshots&&a.screenshots.length>0?a.screenshots[0]:null),[h,i]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),u=(0,c.useRef)(null),B=(0,c.useMemo)(()=>{if(!a)return[];if(a.recordings&&a.recordings.length>0)return a.recordings;if(a.bvid){let b=a.parts||1,c=[];for(let d=1;d<=b;d++)c.push({title:1===d?a.title||"直播回放":`${a.title||"直播回放"} - P${d}`,url:`https://www.bilibili.com/video/${a.bvid}${d>1?`?p=${d}`:""}`});return c}return[]},[a]),C=(0,c.useMemo)(()=>{if(B.length>0){let a=B[d];if(a?.url)return A(a.url)}return""},[B,d]),D=(0,c.useCallback)(b=>{if(b.stopPropagation(),!a.screenshots||!f)return;let c=a.screenshots.findIndex(a=>a.thumbnailUrl===f.thumbnailUrl);if(-1===c)return;let d=0===c?a.screenshots.length-1:c-1;g(a.screenshots[d]),setTimeout(()=>{let a=u.current?.querySelectorAll("button");a&&a[d]&&a[d].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},50)},[a.screenshots,f]),E=(0,c.useCallback)(b=>{if(b.stopPropagation(),!a.screenshots||!f)return;let c=a.screenshots.findIndex(a=>a.thumbnailUrl===f.thumbnailUrl);if(-1===c)return;let d=c===a.screenshots.length-1?0:c+1;g(a.screenshots[d]),setTimeout(()=>{let a=u.current?.querySelectorAll("button");a&&a[d]&&a[d].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},50)},[a.screenshots,f]),F=(0,c.useCallback)(a=>{e(a),h&&(i(!1),setTimeout(()=>i(!0),0))},[h]),G=a.songCuts||[];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-12 animate-in slide-in-from-bottom-8 duration-700",id:"live-detail",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-stretch",children:[(0,b.jsxs)("div",{className:"lg:col-span-8 bg-white/40 p-8 md:p-10 rounded-[3.5rem] border-4 border-white shadow-2xl backdrop-blur-md flex flex-col justify-center gap-6 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute -right-10 -bottom-10 text-[180px] font-black text-[#f8b195]/5 pointer-events-none select-none",children:"MEMORY"}),(0,b.jsxs)("div",{className:"space-y-8 relative z-10",children:[(0,b.jsxs)("div",{className:"inline-flex items-center gap-3 px-5 py-2 bg-[#fef5f0] rounded-full text-[#f8b195] w-fit border border-[#f8b195]/20 shadow-sm",children:[(0,b.jsx)(v,{size:20}),(0,b.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.3em]",children:"Official Archive"})]}),(0,b.jsxs)("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-black text-[#4a3728] tracking-tighter leading-none",children:[a.date," ",(0,b.jsx)("span",{className:"text-[#f8b195] block md:inline mt-2 md:mt-0",children:"直播档案"})]}),(0,b.jsx)("p",{className:"text-xl md:text-2xl text-[#8eb69b] font-bold leading-relaxed tracking-tight max-w-4xl",children:a.summary||`${a.date} 的精彩直播时刻`})]})]}),(0,b.jsxs)("div",{className:"lg:col-span-4 grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white/40 p-6 rounded-[2.5rem] border-4 border-white shadow-xl backdrop-blur-md flex flex-col items-center justify-center text-center space-y-2 col-span-2",children:[(0,b.jsx)(r.Heart,{size:24,className:"text-[#f67280]"}),(0,b.jsx)("span",{className:"text-[10px] font-black text-[#8eb69b] uppercase tracking-widest",children:"总弹幕数"}),(0,b.jsx)("span",{className:"text-2xl font-black text-[#4a3728]",children:a.danmakuCount||"N/A"})]}),(0,b.jsx)("div",{className:"bg-white/40 p-6 rounded-[2.5rem] border-4 border-white shadow-xl backdrop-blur-md flex flex-col items-center justify-center text-center space-y-2 col-span-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-4 w-full justify-around px-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("span",{className:"text-[9px] font-black text-[#8eb69b] uppercase tracking-widest mb-1",children:"开播"}),(0,b.jsx)("span",{className:"text-lg font-black text-[#4a3728] tabular-nums",children:a.startTime||"N/A"})]}),(0,b.jsx)("div",{className:"w-px h-8 bg-gray-100"}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("span",{className:"text-[9px] font-black text-[#8eb69b] uppercase tracking-widest mb-1",children:"直播时长"}),(0,b.jsx)("span",{className:"text-sm font-black text-[#f8b195] bg-[#fef5f0] px-3 py-1 rounded-full",children:a.duration||"N/A"})]}),(0,b.jsx)("div",{className:"w-px h-8 bg-gray-100"}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("span",{className:"text-[9px] font-black text-[#8eb69b] uppercase tracking-widest mb-1",children:"下播"}),(0,b.jsx)("span",{className:"text-lg font-black text-[#4a3728] tabular-nums",children:a.endTime||"N/A"})]})]})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 lg:items-start",children:[(0,b.jsxs)("div",{className:"lg:col-span-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-2 h-6 bg-[#f8b195] rounded-full"}),(0,b.jsx)("h3",{className:"text-2xl font-black text-[#4a3728] tracking-tight",children:"完整回放档案"})]}),B.length>0&&C&&(0,b.jsxs)("button",{onClick:()=>o(C),className:"text-xs font-black text-[#8eb69b] hover:text-[#f8b195] transition-colors flex items-center gap-2",children:[(0,b.jsx)(w,{size:14})," 全屏播放"]})]}),B.length>1&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-3 bg-white/40 p-3 rounded-3xl border-2 border-white shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 text-[#f8b195] text-[10px] font-black uppercase tracking-widest border-r border-[#f8b195]/20 mr-1",children:[(0,b.jsx)(x,{size:14})," 视频分段"]}),B.map((a,c)=>(0,b.jsx)("button",{onClick:()=>F(c),className:`px-4 py-2 rounded-2xl text-[11px] font-black transition-all ${d===c?"bg-[#f8b195] text-white shadow-md":"bg-white/60 text-[#8eb69b] hover:bg-white border border-white"}`,children:a.title},c))]}),(0,b.jsx)("div",{className:"aspect-video bg-black rounded-[3.5rem] overflow-hidden border-4 border-white shadow-2xl relative group",children:!h&&C?(0,b.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-900 cursor-pointer",onClick:()=>i(!0),children:[a.coverUrl&&(0,b.jsx)("img",{src:a.coverUrl,alt:"Cover",className:"absolute inset-0 w-full h-full object-cover"}),(0,b.jsxs)("div",{className:"relative z-10 flex flex-col items-center gap-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-[#f8b195] rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:(0,b.jsx)(s.PlayCircle,{size:40,className:"text-white"})}),(0,b.jsx)("span",{className:"text-[#8eb69b] font-black text-sm",children:"点击播放"})]})]}):C?(0,b.jsx)("iframe",{src:C,className:"w-full h-full border-0",allowFullScreen:!0},C):(0,b.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#8eb69b] bg-gray-900",children:[(0,b.jsx)(s.PlayCircle,{size:48,className:"mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-sm font-black tracking-wider",children:"暂无回放录像"}),(0,b.jsx)("p",{className:"text-xs font-black opacity-60 mt-2",children:"欢迎联系投稿"})]})})]}),(0,b.jsxs)("div",{className:"lg:col-span-4 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4",children:[(0,b.jsx)("div",{className:"w-2 h-6 bg-[#8eb69b] rounded-full"}),(0,b.jsx)("h3",{className:"text-2xl font-black text-[#4a3728] tracking-tight",children:"时光歌切"})]}),(0,b.jsxs)("div",{className:"bg-white/40 rounded-[3rem] border-4 border-white shadow-xl overflow-hidden flex flex-col",style:{height:"540px"},children:[(0,b.jsx)("div",{className:"p-6 bg-[#f2f9f1]/40 border-b border-white",children:(0,b.jsx)("span",{className:"text-[10px] font-black text-[#8eb69b] uppercase tracking-[0.3em]",children:"Tracks from Today"})}),(0,b.jsx)("div",{className:"overflow-y-auto custom-scrollbar p-6 space-y-4 flex-1",children:G.length>0?G.map((a,c)=>(0,b.jsxs)("button",{onClick:()=>a.url&&o(A(a.url)),className:"w-full flex items-center gap-4 p-4 bg-white/60 hover:bg-white rounded-3xl border border-white transition-all group hover:shadow-md text-left",disabled:!a.url,children:[a.coverThumbnailUrl?(0,b.jsx)("div",{className:"w-10 h-10 rounded-2xl overflow-hidden shrink-0 group-hover:rotate-6 transition-transform",children:(0,b.jsx)(z,{src:a.coverThumbnailUrl,className:"w-full h-full object-cover",alt:""})}):(0,b.jsx)("div",{className:"w-10 h-10 bg-[#fef5f0] text-[#f8b195] rounded-2xl flex items-center justify-center shrink-0 group-hover:rotate-6 transition-transform",children:(0,b.jsx)(t.Music,{size:18})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"font-black text-[#4a3728] group-hover:text-[#f8b195] transition-colors truncate",children:a.song_name||"未命名歌曲"}),(0,b.jsx)("span",{className:"text-[9px] font-black text-[#8eb69b] uppercase tracking-widest opacity-60",children:a.performed_at})]}),a.url&&(0,b.jsx)(s.PlayCircle,{size:20,className:"text-[#f8b195] opacity-0 group-hover:opacity-100 transition-all"})]},c)):(0,b.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center py-12",children:[(0,b.jsx)(t.Music,{size:40,className:"mb-4 text-[#8eb69b] opacity-50"}),(0,b.jsx)("p",{className:"text-sm font-black text-[#8eb69b] tracking-wider",children:"暂无演唱记录"}),(0,b.jsx)("p",{className:"text-xs font-black text-[#8eb69b] opacity-60 mt-2",children:"欢迎联系投稿"})]})})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[(0,b.jsxs)("div",{className:"lg:col-span-7 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4",children:[(0,b.jsx)("div",{className:"w-2 h-6 bg-[#f8b195] rounded-full"}),(0,b.jsx)("h3",{className:"text-2xl font-black text-[#4a3728] tracking-tight",children:"瞬间定格"})]}),(0,b.jsxs)("div",{className:"bg-white/40 rounded-[3.5rem] border-4 border-white shadow-xl p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"aspect-[16/10] rounded-[2.5rem] overflow-hidden bg-black/5 border-2 border-white shadow-inner relative group",children:[a.screenshots&&a.screenshots.length>0?(0,b.jsx)(z,{src:f?.thumbnailUrl||a.coverUrl||"",className:"w-full h-full object-cover animate-in fade-in zoom-in-95 duration-500",alt:"Archive"}):(0,b.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-[#8eb69b] bg-gray-900",children:[(0,b.jsx)(p.Image,{size:48,className:"mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-sm font-black tracking-wider",children:"暂无图片"}),(0,b.jsx)("p",{className:"text-xs font-black opacity-60 mt-2",children:"欢迎联系投稿"})]}),a.screenshots&&a.screenshots.length>1&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:D,className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 bg-white/30 hover:bg-white text-white hover:text-[#f8b195] backdrop-blur-md rounded-full transition-all opacity-0 group-hover:opacity-100 shadow-lg border border-white/40 transform active:scale-90",children:(0,b.jsx)(j.ChevronLeft,{size:24,strokeWidth:3})}),(0,b.jsx)("button",{onClick:E,className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 bg-white/30 hover:bg-white text-white hover:text-[#f8b195] backdrop-blur-md rounded-full transition-all opacity-0 group-hover:opacity-100 shadow-lg border border-white/40 transform active:scale-90",children:(0,b.jsx)(k.ChevronRight,{size:24,strokeWidth:3})})]}),a.screenshots&&a.screenshots.length>0&&f&&(0,b.jsxs)("div",{className:"absolute bottom-4 right-4 px-3 py-1 bg-black/50 backdrop-blur-md rounded-full text-white text-[10px] font-black tracking-widest opacity-0 group-hover:opacity-100 transition-opacity",children:[a.screenshots.findIndex(a=>a.thumbnailUrl===f.thumbnailUrl)+1," / ",a.screenshots.length]})]}),a.screenshots&&a.screenshots.length>1&&(0,b.jsx)("div",{ref:u,className:"flex gap-4 overflow-x-auto pb-2 custom-scrollbar px-2",children:a.screenshots.map((a,c)=>(0,b.jsx)("button",{onClick:b=>{g(a),setTimeout(()=>{b.currentTarget.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},50)},className:`w-32 aspect-video rounded-2xl overflow-hidden shrink-0 border-4 transition-all ${f?.thumbnailUrl===a.thumbnailUrl?"border-[#f8b195] shadow-lg scale-105":"border-white opacity-60 hover:opacity-100"}`,children:(0,b.jsx)(z,{src:a.thumbnailUrl,className:"w-full h-full object-cover",alt:""})},c))})]})]}),(0,b.jsxs)("div",{className:"lg:col-span-5 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4",children:[(0,b.jsx)("div",{className:"w-2 h-6 bg-[#8eb69b] rounded-full"}),(0,b.jsx)("h3",{className:"text-2xl font-black text-[#4a3728] tracking-tight",children:"弹幕热语"})]}),(0,b.jsx)("div",{className:"bg-white/40 rounded-[3.5rem] border-4 border-white shadow-xl p-10 flex flex-col h-full bg-gradient-to-br from-white to-[#f2f9f1]/50 backdrop-blur-md",children:(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center gap-8",children:[(0,b.jsx)("div",{className:"w-full",children:a.danmakuCloudUrl?(0,b.jsxs)("div",{className:"relative group w-full cursor-pointer",onClick:()=>m(!0),children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-[#8eb69b]/20 blur-[60px] opacity-40 group-hover:opacity-100 transition-opacity"}),(0,b.jsx)("img",{src:a.danmakuCloudUrl,className:"w-full aspect-[4/3] object-cover rounded-[2.5rem] border-4 border-white shadow-2xl relative z-10 transition-transform group-hover:scale-[1.02]",alt:"Cloud"}),(0,b.jsx)("div",{className:"absolute inset-0 z-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,b.jsx)("div",{className:"w-16 h-16 bg-black/30 backdrop-blur-sm rounded-full flex items-center justify-center text-white border border-white/20 shadow-lg transform scale-75 group-hover:scale-100 transition-transform",children:(0,b.jsx)(w,{size:24})})})]}):(0,b.jsxs)("div",{className:"w-full aspect-[4/3] flex flex-col items-center justify-center text-[#8eb69b] bg-gray-900 rounded-[2.5rem] border-4 border-white shadow-2xl",children:[(0,b.jsx)(q.Cloud,{size:48,className:"mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-sm font-black tracking-wider",children:"暂无弹幕云图"}),(0,b.jsx)("p",{className:"text-xs font-black opacity-60 mt-2",children:"欢迎联系投稿"})]})}),(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-[#fef5f0] rounded-full text-[#f8b195] text-[10px] font-black uppercase tracking-widest border border-[#f8b195]/10",children:[(0,b.jsx)(q.Cloud,{size:14})," Emotion Analysis"]}),(0,b.jsx)("p",{className:"text-sm font-bold text-[#4a3728]/70 leading-relaxed max-w-xs mx-auto",children:"每一个跳动的热词，都是满满与粉丝间独一无二的心跳同频。"})]})]})})]})]})]}),n&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[100] bg-black/90 backdrop-blur-xl flex items-center justify-center p-4 md:p-10 animate-in fade-in duration-300",onClick:()=>o(null),children:[(0,b.jsx)("button",{className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-50 hover:rotate-90 duration-300",onClick:()=>o(null),children:(0,b.jsx)(y.X,{size:28})}),(0,b.jsx)("div",{className:"w-full max-w-5xl aspect-video",children:(0,b.jsx)("iframe",{src:n,className:"w-full h-full rounded-2xl",allowFullScreen:!0,onClick:a=>a.stopPropagation()})}),(0,b.jsxs)("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 text-white/50 pointer-events-none",children:[(0,b.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.5em]",children:"Video Player"}),(0,b.jsx)("span",{className:"text-[10px] font-bold",children:a.date})]})]}),l&&a.danmakuCloudUrl&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[200] bg-black/90 backdrop-blur-xl flex items-center justify-center p-4 md:p-10 animate-in fade-in duration-300",onClick:()=>m(!1),children:[(0,b.jsx)("button",{className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-50 hover:rotate-90 duration-300",onClick:()=>m(!1),children:(0,b.jsx)(y.X,{size:28})}),(0,b.jsx)("img",{src:a.danmakuCloudUrl,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl animate-in zoom-in-95 duration-300",alt:"Cloud Detail",onClick:a=>a.stopPropagation()}),(0,b.jsxs)("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 text-white/50 pointer-events-none",children:[(0,b.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.5em]",children:"Danmaku Cloud Analysis"}),(0,b.jsx)("span",{className:"text-[10px] font-bold",children:a.date})]})]}),(0,b.jsx)("style",{children:`
        .custom-scrollbar::-webkit-scrollbar { height: 6px; width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #8eb69b33; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #8eb69b66; }
      `})]})};function C(){return(0,b.jsxs)("div",{className:"py-48 flex flex-col items-center gap-6",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-8 border-[#f8b195]/20 border-t-[#f8b195] rounded-full animate-spin"}),(0,b.jsx)("span",{className:"text-[#8eb69b] font-black tracking-widest uppercase text-xs",children:"正在加载..."})]})}function D(){let{currentDate:a,lives:g,loading:h,error:j,changeMonth:k,setCurrentDate:l,loadLives:n,calendarCells:p,todayStr:q,minYear:r,maxYear:s}=(()=>{let[a,b]=(0,c.useState)(()=>{let a=new Date;return new Date(a.getFullYear(),a.getMonth(),1)}),[d,e]=(0,c.useState)([]),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(2019),m=(0,c.useMemo)(()=>new Date().getFullYear(),[]),n=(0,c.useMemo)(()=>{let a=new Date;return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`},[]),o=(0,c.useMemo)(()=>{let b=a.getFullYear(),c=a.getMonth();return{firstDay:new Date(b,c,1).getDay()||7,days:new Date(b,c+1,0).getDate()}},[a]),p=(0,c.useMemo)(()=>{let b=[];try{for(let a=1;a<o.firstDay;a++)b.push({day:null,date:""});for(let c=1;c<=o.days;c++){let e=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(c).padStart(2,"0")}`,f=Array.isArray(d)?d.find(a=>a?.date===e):void 0;b.push({day:c,date:e,live:f})}}catch(a){console.error("生成日历单元格失败:",a)}return b},[o,d,a]),q=(0,c.useCallback)(async(a,b)=>{if(!a||!b||b<1||b>12)return void j("日期参数无效");h(!0),j(null);try{let c=await f.livestreamRepository.getLivestreams({year:a,month:b,limit:100}),d=Array.isArray(c.livestreams)?c.livestreams:[];e(d)}catch(a){j(a instanceof Error?a.message:"加载失败，请稍后重试"),e([])}finally{h(!1)}},[]),r=(0,c.useCallback)(a=>{0!==a&&b(b=>{let c=new Date(b.getFullYear(),b.getMonth()+a,1),d=c.getFullYear();return d<k?new Date(k,0,1):d>m?new Date(m,11,1):c})},[k,m]),s=(0,c.useCallback)(async()=>{await q(a.getFullYear(),a.getMonth()+1)},[a,q]);return(0,c.useEffect)(()=>{(async()=>{try{let a=await f.livestreamRepository.getConfig();l(a.minYear)}catch(a){console.error("获取直播配置失败:",a)}})()},[]),(0,c.useEffect)(()=>{q(a.getFullYear(),a.getMonth()+1)},[a,q]),{currentDate:a,lives:d,loading:g,error:i,calendarCells:p,todayStr:n,minYear:k,maxYear:m,changeMonth:r,setCurrentDate:b,loadLives:q,refresh:s}})(),{selectedLive:t,handleSelectLive:u,clearSelection:v,liveDetailRef:w}=(()=>{let[a,b]=(0,c.useState)(null),[d,e]=(0,c.useState)(!1),g=(0,c.useRef)(null);return{selectedLive:a,handleSelectLive:(0,c.useCallback)(async a=>{if(a.live){e(!0);try{let c=await f.livestreamRepository.getLivestreamByDate(a.live.date);c?b(c):b(a.live),setTimeout(()=>{g.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(c){console.error("获取直播详情失败:",c),b(a.live)}finally{e(!1)}}},[]),clearSelection:(0,c.useCallback)(()=>{b(null)},[]),liveDetailRef:g,detailLoading:d}})();return(0,c.useEffect)(()=>{v()},[a,v]),(0,c.useEffect)(()=>{t&&(g.some(a=>a.date===t.date)||v())},[g,t,v]),(0,b.jsx)(e.ErrorBoundary,{children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8 space-y-12 animate-in fade-in duration-1000",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 bg-white/40 p-6 rounded-[3rem] border-2 border-white shadow-xl backdrop-blur-md",children:[(0,b.jsx)(o,{}),(0,b.jsx)(m,{currentDate:a,onMonthChange:k,onDateChange:l,minYear:r,maxYear:s})]}),j&&(0,b.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-2xl text-red-600",children:[(0,b.jsx)(d.AlertCircle,{className:"w-5 h-5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-sm font-bold",children:j})]}),h?(0,b.jsx)(C,{}):(0,b.jsx)(i,{currentDate:a,cells:p,todayStr:q,onCellClick:u,selectedDate:t?.date}),t&&!h&&(0,b.jsx)(B,{live:t})]})})}a.s(["default",()=>D],76208)}];

//# sourceMappingURL=app_live_LivestreamPageClient_tsx_a0c25312._.js.map