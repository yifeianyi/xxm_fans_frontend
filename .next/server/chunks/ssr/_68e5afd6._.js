module.exports=[84443,7820,a=>{"use strict";class b extends Error{status;code;constructor(a,b,c){super(b),this.status=a,this.code=c,this.name="ApiError"}}a.s(["ApiError",()=>b],7820);class c{baseURL;constructor(a){this.baseURL=a||d()}async request(a,c){try{let d=this.baseURL.endsWith("/")?this.baseURL:`${this.baseURL}/`,e=a.startsWith("/")?a.slice(1):a,f=`${d}${e}`,g=await fetch(f,{...c,headers:{"Content-Type":"application/json",...c?.headers}});if(!g.ok)throw new b(g.status,`Request failed: ${g.statusText}`);let h=await g.json();if(h&&"object"==typeof h&&"code"in h)if(200===h.code)return{data:h.data};else throw new b(h.code,h.message||"Request failed");return{data:h}}catch(a){if(a instanceof b)return{error:a};return{error:new b(500,"Network error")}}}async get(a){return this.request(a,{method:"GET"})}async post(a,b){return this.request(a,{method:"POST",body:JSON.stringify(b)})}async put(a,b){return this.request(a,{method:"PUT",body:JSON.stringify(b)})}async delete(a){return this.request(a,{method:"DELETE"})}}function d(){return process.env.INTERNAL_API_BASE_URL||process.env.API_BASE_URL||process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000/api"}async function e(a,c){let e=d(),f=e.endsWith("/")?e:`${e}/`,g=a.startsWith("/")?a.slice(1):a,h=`${f}${g}`;try{let a={...c,headers:{"Content-Type":"application/json",...c?.headers}};c?.revalidate!==void 0&&(a.next={revalidate:c.revalidate});let d=await fetch(h,a);if(!d.ok)throw new b(d.status,`Request failed: ${d.statusText}`);let e=await d.json();if(e&&"object"==typeof e&&"code"in e)if(200===e.code)return{data:e.data};else throw new b(e.code,e.message||"Request failed");return{data:e}}catch(a){if(a instanceof b)return{error:a};return{error:new b(500,"Network error")}}}async function f(a,b){return e(a,{method:"GET",revalidate:b})}function g(a){if(!a)return"";if(a.startsWith("http://")||a.startsWith("https://"))return a;let b=a.startsWith("/")?a:`/${a}`,c=(process.env.INTERNAL_API_BASE_URL||process.env.API_BASE_URL||process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000/api").replace(/\/api\/?$/,"");return`${c}${b}`}a.s(["ApiClient",()=>c,"get",()=>f,"getFullCoverUrl",()=>g],84443)},25015,a=>{"use strict";let b=(0,a.i(70106).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);a.s(["Play",()=>b],25015)},44399,8984,a=>{"use strict";var b=a.i(84443);async function c(){let a=await (0,b.get)("/fansDIY/collections/",300);if(a.data)return(a.data.results||a.data).map(e);throw a.error||Error("Failed to fetch collections")}async function d(a){let c=new URLSearchParams;a?.page&&c.set("page",a.page.toString()),a?.page_size&&c.set("page_size",a.page_size.toString()),a?.collection&&c.set("collection",a.collection);let d=await (0,b.get)(`/fansDIY/works/?${c.toString()}`,60);if(d.data)return{...d.data,results:d.data.results.map(f)};throw d.error||Error("Failed to fetch works")}function e(a){return{id:a.id?.toString()||"",name:a.name||"",description:a.description||"",worksCount:a.works_count||0}}function f(a){let c="";return a.collection&&(c="object"==typeof a.collection?a.collection.id?.toString()||"":a.collection.toString()),{id:a.id?.toString()||"",title:a.title||"",author:a.author||"",cover:(0,b.getFullCoverUrl)(a.cover_url||a.cover),coverThumbnailUrl:(0,b.getFullCoverUrl)(a.cover_thumbnail_url||a.cover_thumbnail),videoUrl:a.video_url||a.view_url||"",note:a.note||a.notes||"",collectionId:c,position:a.position||0}}a.s(["getCollections",()=>c,"getWorks",()=>d],44399);var g=a.i(87924),h=a.i(33508);class i{static parseUrl(a){if(a.includes("bilibili.com")){let b=a.match(/BV[a-zA-Z0-9]+/);if(b){let c=a.match(/[?&]p=(\d+)/),d=c?c[1]:"1";return{url:`https://player.bilibili.com/player.html?bvid=${b[0]}&p=${d}&high_quality=1&danmaku=0&autoplay=0&mute=0`,platform:"bilibili"}}}if(a.includes("youtube.com")||a.includes("youtu.be")){let b=a.match(/(?:v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);if(b)return{url:`https://www.youtube.com/embed/${b[1]}?autoplay=0`,platform:"youtube"}}return{url:a,platform:"other"}}static getEmbedUrl(a){return this.parseUrl(a).url}}function j({isOpen:a,onClose:b,videoUrl:c}){if(!a)return null;let d=i.getEmbedUrl(c);return(0,g.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/80 backdrop-blur-sm",style:{position:"fixed",top:0,left:0,right:0,bottom:0},onClick:b,children:(0,g.jsxs)("div",{className:"relative w-full max-w-5xl mx-4 bg-black rounded-2xl overflow-hidden shadow-2xl",onClick:a=>a.stopPropagation(),children:[(0,g.jsx)("button",{onClick:b,className:"absolute top-4 right-4 z-50 p-2 bg-black/50 hover:bg-black/70 rounded-full text-white transition-all","aria-label":"关闭视频",children:(0,g.jsx)(h.X,{size:24})}),(0,g.jsx)("div",{className:"relative w-full aspect-video",children:(0,g.jsx)("iframe",{src:d,className:"absolute inset-0 w-full h-full border-0",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},allowFullScreen:!0,allow:"autoplay; fullscreen",title:"视频播放"})})]})})}a.s(["default",()=>j],8984)},79148,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(25015),e=a.i(76472),f=a.i(8406),g=a.i(70106);let h=(0,g.default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),i=(0,g.default)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),j=(0,g.default)("paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);var k=a.i(50944),l=a.i(44399),m=a.i(8984);let n=()=>(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h,{className:"w-7 h-7 text-pink-400 animate-bounce",style:{animationDelay:"0.1s"}}),(0,b.jsx)(e.Heart,{className:"w-6 h-6 text-red-400 animate-pulse fill-red-400"}),(0,b.jsx)(f.Sparkles,{className:"w-8 h-8 text-yellow-400 animate-spin",style:{animationDuration:"3s"}}),(0,b.jsx)(i,{className:"w-6 h-6 text-purple-400 animate-bounce",style:{animationDelay:"0.2s"}}),(0,b.jsx)(j,{className:"w-7 h-7 text-blue-400 animate-pulse",style:{animationDelay:"0.3s"}})]}),o=({text:a="加载中...",size:c="md"})=>{let d={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"};return(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:`${d[c]} border-4 border-[#f8b195]/20 rounded-full`}),(0,b.jsx)("div",{className:`absolute inset-0 ${d[c]} border-4 border-[#f8b195] border-t-transparent rounded-full animate-spin`})]}),(0,b.jsx)("span",{className:"text-[#8eb69b] font-black tracking-[0.3em] uppercase text-xs animate-pulse",children:a})]})};function p(){let a=(0,k.useRouter)(),g=(0,k.useSearchParams)().get("collection"),[h,i]=(0,c.useState)([]),[j,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(g||"all"),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1);(0,c.useEffect)(()=>{g?r(g):r("all")},[g]),(0,c.useEffect)(()=>{(async()=>{v(!0);try{let[a,b]=await Promise.all([(0,l.getCollections)(),(0,l.getWorks)({page_size:100})]);i(a),p(b.results)}catch(a){}finally{v(!1)}})()},[]);let w=async b=>{if(r(b),"all"!==b){a.push(`/fansDIY?collection=${b}`,{scroll:!1}),v(!0);try{let a=await (0,l.getWorks)({collection:b,page_size:100});p(a.results)}catch(a){}finally{v(!1)}}else{a.push("/fansDIY",{scroll:!1}),v(!0);try{let a=await (0,l.getWorks)({page_size:100});p(a.results)}catch(a){}finally{v(!1)}}};return(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-12 space-y-12 animate-in fade-in duration-700",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 left-1/3 w-40 h-40 bg-gradient-to-br from-pink-300 via-purple-300 to-blue-300 opacity-15 blur-3xl rounded-full"}),(0,b.jsx)("div",{className:"absolute bottom-0 right-1/4 w-32 h-32 bg-gradient-to-br from-yellow-300 via-orange-300 to-pink-300 opacity-15 blur-3xl rounded-full"})]}),(0,b.jsxs)("div",{className:"text-center space-y-4 py-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-center gap-4 mb-2",children:(0,b.jsx)(n,{})}),(0,b.jsx)("div",{className:"inline-block px-4 py-1 bg-gradient-to-r from-pink-50 to-purple-50 text-pink-400 text-[10px] font-black uppercase tracking-[0.3em] rounded-full border border-pink-200/50 mb-2",children:"✨ Community Creations ✨"}),(0,b.jsx)("h2",{className:"text-4xl md:text-5xl font-black tracking-tight bg-gradient-to-r from-pink-400 via-purple-400 to-blue-400 bg-clip-text text-transparent drop-shadow-sm",children:"精选二创展厅"}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,b.jsx)("div",{className:"h-px w-12 bg-gradient-to-r from-transparent to-pink-300"}),(0,b.jsx)(e.Heart,{className:"w-4 h-4 text-pink-400 fill-pink-400"}),(0,b.jsx)("p",{className:"text-[#8eb69b] font-bold max-w-lg",children:"每一份热爱，都在这里闪闪发光"}),(0,b.jsx)(f.Sparkles,{className:"w-4 h-4 text-yellow-400"}),(0,b.jsx)("div",{className:"h-px w-12 bg-gradient-to-l from-transparent to-pink-300"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap justify-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>w("all"),className:`px-8 py-3.5 rounded-[1.5rem] font-black transition-all duration-300 border-2 ${"all"===q?"bg-[#f8b195] text-white border-[#f8b195] shadow-lg shadow-[#f8b195]/20 scale-105":"bg-white text-[#8eb69b] border-white hover:border-[#f8b195]/20"}`,children:"全部作品"}),h.map(a=>(0,b.jsx)("button",{onClick:()=>w(a.id),className:`px-8 py-3.5 rounded-[1.5rem] font-black transition-all duration-300 border-2 ${q===a.id?"bg-[#f8b195] text-white border-[#f8b195] shadow-lg shadow-[#f8b195]/20 scale-105":"bg-white text-[#8eb69b] border-white hover:border-[#f8b195]/20"}`,children:a.name},a.id))]}),u?(0,b.jsx)("div",{className:"py-32 flex justify-center",children:(0,b.jsx)(o,{text:"正在布置展厅...",size:"lg"})}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:j.map(a=>(0,b.jsxs)("div",{className:"group bg-white rounded-[2.5rem] overflow-hidden shadow-[0_8px_30px_rgb(0,0,0,0.04)] hover:shadow-[0_20px_50px_rgba(248,177,149,0.15)] hover:-translate-y-2 transition-all duration-500 cursor-pointer border-2 border-transparent hover:border-white",onClick:()=>t(a.videoUrl),children:[(0,b.jsxs)("div",{className:"aspect-video relative overflow-hidden bg-[#fef5f0]",children:[(0,b.jsx)("img",{src:a.coverThumbnailUrl||a.cover,alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",loading:"lazy"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-14 h-14 bg-white rounded-full flex items-center justify-center text-[#f8b195] shadow-xl transform scale-75 group-hover:scale-100 transition-transform duration-500",children:(0,b.jsx)(d.Play,{fill:"currentColor",size:24})})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h3",{className:"font-black text-[#4a3728] group-hover:text-[#f8b195] transition-colors line-clamp-1 text-lg",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#fef5f0] flex items-center justify-center text-[8px] font-black text-[#f8b195]",children:"@"}),(0,b.jsx)("span",{className:"text-xs font-black text-[#8eb69b]",children:a.author})]})]}),a.note&&(0,b.jsx)("p",{className:"text-[11px] text-[#8eb69b]/80 font-bold leading-relaxed line-clamp-2 bg-[#fef5f0]/50 p-4 rounded-2xl border border-white",children:a.note})]})]},a.id))}),!u&&j.length>0&&(0,b.jsx)("div",{className:"pt-12 text-center opacity-20",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4 text-[#8eb69b]",children:[(0,b.jsx)("div",{className:"h-px w-16 bg-current"}),(0,b.jsx)("span",{className:"text-xs font-black uppercase tracking-[0.5em]",children:"End of Gallery"}),(0,b.jsx)("div",{className:"h-px w-16 bg-current"})]})}),(0,b.jsx)(m.default,{isOpen:!!s,onClose:()=>t(null),videoUrl:s||""})]})}a.s(["default",()=>p],79148)}];

//# sourceMappingURL=_68e5afd6._.js.map