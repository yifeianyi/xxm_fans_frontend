{"version":3,"sources":["../../../../app/presentation/components/common/PageDecorations.tsx/__nextjs-internal-proxy.mjs","../../../../app/data/DataAnalysisWrapper.tsx/__nextjs-internal-proxy.mjs","../../../../app/data/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CornerDecoration = registerClientReference(\n    function() { throw new Error(\"Attempted to call CornerDecoration() from the server but CornerDecoration is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/presentation/components/common/PageDecorations.tsx\",\n    \"CornerDecoration\",\n);\nexport const DecorativeDivider = registerClientReference(\n    function() { throw new Error(\"Attempted to call DecorativeDivider() from the server but DecorativeDivider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/presentation/components/common/PageDecorations.tsx\",\n    \"DecorativeDivider\",\n);\nexport const FloatingNotes = registerClientReference(\n    function() { throw new Error(\"Attempted to call FloatingNotes() from the server but FloatingNotes is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/presentation/components/common/PageDecorations.tsx\",\n    \"FloatingNotes\",\n);\nexport const PageDecorations = registerClientReference(\n    function() { throw new Error(\"Attempted to call PageDecorations() from the server but PageDecorations is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/presentation/components/common/PageDecorations.tsx\",\n    \"PageDecorations\",\n);\nexport const TitleDecoration = registerClientReference(\n    function() { throw new Error(\"Attempted to call TitleDecoration() from the server but TitleDecoration is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/presentation/components/common/PageDecorations.tsx\",\n    \"TitleDecoration\",\n);\nexport const decorationConfigs = registerClientReference(\n    function() { throw new Error(\"Attempted to call decorationConfigs() from the server but decorationConfigs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/presentation/components/common/PageDecorations.tsx\",\n    \"decorationConfigs\",\n);\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/presentation/components/common/PageDecorations.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/presentation/components/common/PageDecorations.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/data/DataAnalysisWrapper.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/data/DataAnalysisWrapper.tsx\",\n    \"default\",\n);\n","import React from 'react';\nimport type { Metadata } from 'next';\nimport { PageDecorations } from '@/app/presentation/components/common/PageDecorations';\nimport DataAnalysisWrapper from './DataAnalysisWrapper';\nimport { analyticsRepository } from '@/app/infrastructure/repositories';\nimport { AccountData, TimeGranularity } from '@/app/domain/types';\n\nexport const metadata: Metadata = {\n    title: '咻咻满数据分析 - 粉丝趋势、作品数据 | 小满虫之家',\n    description: '查看咻咻满的粉丝增长趋势、作品播放量分析等数据。基于B站开放接口，每小时同步更新。',\n    keywords: ['咻咻满', '数据分析', '粉丝趋势', '作品数据', 'B站数据'],\n};\n\n// 服务端数据获取 - 获取所有粒度的数据\nasync function getAccountsData(): Promise<AccountData[]> {\n    try {\n        // 分别获取三种粒度的数据\n        const [dayData, weekData, monthData] = await Promise.all([\n            analyticsRepository.getAllAccountsData('DAY', 30).catch(() => []),\n            analyticsRepository.getAllAccountsData('WEEK', 30).catch(() => []),\n            analyticsRepository.getAllAccountsData('MONTH', 30).catch(() => []),\n        ]);\n\n        // 合并数据 - 以 DAY 数据为基础，合并其他粒度的 history\n        const mergedData = dayData.map((dayAccount, index) => {\n            const weekAccount = weekData.find(w => w.id === dayAccount.id);\n            const monthAccount = monthData.find(m => m.id === dayAccount.id);\n\n            return {\n                id: dayAccount.id,\n                name: dayAccount.name,\n                totalFollowers: dayAccount.totalFollowers,\n                history: {\n                    DAY: dayAccount.history?.DAY || [],\n                    WEEK: weekAccount?.history?.WEEK || [],\n                    MONTH: monthAccount?.history?.MONTH || [],\n                },\n            };\n        });\n\n        return mergedData;\n    } catch (err) {\n        console.error('获取账号数据失败:', err);\n        return [];\n    }\n}\n\n// 主页面组件（Server Component）\nexport default async function DataAnalysisPage() {\n    const accounts = await getAccountsData();\n    \n    return (\n        <>\n            {/* 页面装饰 - 数据主题 */}\n            <PageDecorations \n                theme=\"data\" \n                glowColors={['#f8b195', '#8eb69b']}\n            />\n            \n            <DataAnalysisWrapper initialAccounts={accounts} />\n        </>\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1]}