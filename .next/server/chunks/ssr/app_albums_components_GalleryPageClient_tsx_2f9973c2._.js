module.exports=[48738,a=>{"use strict";var b=a.i(87924),c=a.i(8406),d=a.i(21374),e=a.i(76472),f=a.i(13513),g=a.i(65341),h=a.i(21452),i=a.i(72131),j=a.i(50944);a.i(76990);var k=a.i(59110);function l({galleryTree:a,currentGallery:c,expandedNodes:d,onToggle:e,onSelect:f,isOpen:g,onClose:h}){return(0,b.jsxs)(b.Fragment,{children:[g&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/20 z-40 lg:hidden",onClick:h}),(0,b.jsxs)("aside",{className:`
                    fixed lg:static inset-y-0 left-0 z-50
                    w-72 bg-white/90 backdrop-blur-sm border-r border-[#8eb69b]/20
                    transform transition-transform duration-300 ease-in-out
                    flex flex-col
                    ${g?"translate-x-0":"-translate-x-full lg:translate-x-0"}
                `,children:[(0,b.jsx)("div",{className:"p-4 border-b border-[#8eb69b]/20",children:(0,b.jsx)("h2",{className:"text-lg font-bold text-[#4a3728]",children:"图集导航"})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,b.jsx)("div",{className:"text-sm text-[#4a3728]/60",children:"图集列表加载中..."})})]})]})}var m=a.i(72692),n=a.i(87532),o=a.i(50522);function p({breadcrumbs:a,currentGallery:c,searchTerm:d,searchResults:e,showSearchResults:f,sidebarOpen:g,onSidebarToggle:h,onBreadcrumbClick:j,onSearchChange:k,onSearchResultClick:l}){return(0,b.jsxs)("header",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-[#8eb69b]/20 px-6 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:h,className:"lg:hidden p-2 rounded-lg hover:bg-[#8eb69b]/10 transition-colors","aria-label":g?"关闭侧边栏":"打开侧边栏",children:(0,b.jsx)(m.Menu,{className:"w-5 h-5 text-[#4a3728]"})}),(0,b.jsxs)("nav",{className:"flex-1 flex items-center gap-2 overflow-x-auto",children:[(0,b.jsx)("button",{onClick:()=>j({id:"root",title:"首页"}),className:"text-sm text-[#4a3728]/60 hover:text-[#f8b195] transition-colors whitespace-nowrap",children:"图集首页"}),a.map((c,d)=>(0,b.jsxs)(i.default.Fragment,{children:[(0,b.jsx)(o.ChevronRight,{className:"w-4 h-4 text-[#4a3728]/30 flex-shrink-0"}),(0,b.jsx)("button",{onClick:()=>j(c),className:`text-sm whitespace-nowrap transition-colors ${d===a.length-1?"text-[#f8b195] font-medium":"text-[#4a3728]/60 hover:text-[#f8b195]"}`,children:c.title})]},c.id))]}),(0,b.jsxs)("div",{className:"relative hidden sm:block",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#4a3728]/40"}),(0,b.jsx)("input",{type:"text",placeholder:"搜索图集...",value:d,onChange:a=>k(a.target.value),className:"pl-9 pr-4 py-2 rounded-full bg-[#fef5f0] border border-[#8eb69b]/20 text-sm text-[#4a3728] placeholder:text-[#4a3728]/40 focus:outline-none focus:border-[#f8b195] focus:ring-2 focus:ring-[#f8b195]/20 transition-all w-48 focus:w-64"}),f&&e.length>0&&(0,b.jsx)("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-[#8eb69b]/20 py-2 z-50",children:e.map(a=>(0,b.jsx)("button",{onClick:()=>l(a),className:"w-full px-4 py-2 text-left text-sm text-[#4a3728] hover:bg-[#fef5f0] transition-colors",children:a.title},a.id))})]})]}),c&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-[#4a3728]",children:c.title}),c.description&&(0,b.jsx)("p",{className:"mt-1 text-sm text-[#4a3728]/60",children:c.description})]})]})}var q=a.i(71987),r=a.i(92596),s=a.i(79165);function t({galleries:a,onGalleryClick:c}){return 0===a.length?(0,b.jsx)("div",{className:"text-center py-20",children:(0,b.jsx)("p",{className:"text-[#4a3728]/60",children:"暂无图集"})}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(a=>(0,b.jsxs)("button",{onClick:()=>c(a),className:"group relative bg-white rounded-2xl overflow-hidden shadow-sm border border-[#8eb69b]/10 hover:border-[#f8b195]/50 hover:shadow-lg hover:shadow-[#f8b195]/10 transition-all duration-300 text-left",children:[(0,b.jsxs)("div",{className:"aspect-[4/3] relative bg-gradient-to-br from-[#fef5f0] to-[#f8b195]/10",children:[a.coverUrl?(0,b.jsx)(q.default,{src:a.coverThumbnailUrl||a.coverUrl,alt:a.title,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-500",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw"}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(r.Folder,{className:"w-16 h-16 text-[#8eb69b]/30"})}),(0,b.jsxs)("div",{className:"absolute top-3 right-3 px-2 py-1 bg-black/50 backdrop-blur-sm rounded-full flex items-center gap-1",children:[(0,b.jsx)(s.ImageIcon,{className:"w-3 h-3 text-white"}),(0,b.jsx)("span",{className:"text-xs text-white font-medium",children:a.imageCount})]})]}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("h3",{className:"font-bold text-[#4a3728] group-hover:text-[#f8b195] transition-colors line-clamp-1",children:a.title}),a.description&&(0,b.jsx)("p",{className:"mt-1 text-sm text-[#4a3728]/60 line-clamp-2",children:a.description})]})]},a.id))})}var u=a.i(25015);function v({images:a,onImageClick:c}){return 0===a.length?(0,b.jsx)("div",{className:"text-center py-20",children:(0,b.jsx)("p",{className:"text-[#4a3728]/60",children:"暂无图片"})}):(0,b.jsx)("div",{className:"columns-2 md:columns-3 lg:columns-4 gap-4 space-y-4",children:a.map((a,d)=>(0,b.jsx)("button",{onClick:()=>c(a,d),className:"group block w-full break-inside-avoid mb-4",children:(0,b.jsxs)("div",{className:"relative rounded-xl overflow-hidden bg-[#fef5f0] border border-[#8eb69b]/10 hover:border-[#f8b195]/50 hover:shadow-lg hover:shadow-[#f8b195]/10 transition-all duration-300",children:[(0,b.jsxs)("div",{className:"relative",children:[a.isGif||a.isVideo?(0,b.jsx)("img",{src:a.thumbnailUrl||a.url,alt:a.title||a.filename,className:"w-full h-auto object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy"}):(0,b.jsx)(q.default,{src:a.thumbnailUrl||a.url,alt:a.title||a.filename,width:400,height:300,className:"w-full h-auto object-cover group-hover:scale-105 transition-transform duration-500",sizes:"(max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw"}),a.isVideo&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 group-hover:bg-black/30 transition-colors",children:(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/90 flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,b.jsx)(u.Play,{className:"w-6 h-6 text-[#f67280] fill-[#f67280] ml-0.5"})})})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-3",children:(0,b.jsx)("span",{className:"text-white text-sm font-medium line-clamp-1",children:a.title||a.filename})}),(a.isGif||a.isVideo)&&(0,b.jsx)("div",{className:"absolute top-2 right-2 px-2 py-0.5 bg-[#f67280] rounded text-xs text-white font-medium",children:a.isGif?"GIF":"视频"})]})},a.id))})}var w=a.i(33508),x=a.i(13749),y=a.i(8549),z=a.i(12439),A=a.i(52920);function B({images:a,currentIndex:c,onClose:d,onPrevious:e,onNext:f,onIndexChange:g}){let h=a[c],j=(0,i.useRef)(null),[k,l]=(0,i.useState)(!0),[m,n]=(0,i.useState)(!0),p=(0,i.useCallback)(a=>{switch(a.key){case"Escape":d();break;case"ArrowLeft":e();break;case"ArrowRight":f();break;case" ":a.preventDefault(),h?.isVideo&&j.current&&(j.current.paused?(j.current.play(),l(!0)):(j.current.pause(),l(!1)))}},[d,e,f,h]);if((0,i.useEffect)(()=>(document.addEventListener("keydown",p),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",p),document.body.style.overflow=""}),[p]),(0,i.useEffect)(()=>{l(!0),n(!0)},[c]),!h)return null;let q=h.isVideo,r=h.isGif,s=()=>{j.current&&(j.current.paused?(j.current.play(),l(!0)):(j.current.pause(),l(!1)))};return(0,b.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/95 flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 flex-shrink-0",children:[(0,b.jsxs)("div",{className:"px-3 py-1 rounded-full bg-white/10 text-white text-sm",children:[c+1," / ",a.length,q&&" · 视频",r&&" · GIF"]}),(0,b.jsx)("button",{onClick:d,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"关闭",children:(0,b.jsx)(w.X,{className:"w-6 h-6 text-white"})})]}),(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center min-h-0 overflow-hidden",children:(0,b.jsxs)("div",{className:"flex items-center justify-center",children:[a.length>1&&(0,b.jsx)("button",{onClick:e,className:"flex-shrink-0 p-2 md:p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors mr-2","aria-label":"上一张",children:(0,b.jsx)(x.ChevronLeft,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),(0,b.jsx)("div",{className:"relative",children:q?(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("video",{ref:j,src:h.url,className:"max-w-full max-h-[calc(100vh-180px)] object-contain",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onClick:s}),(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-4 px-4 py-2 rounded-full bg-black/60 backdrop-blur-sm",children:[(0,b.jsx)("button",{onClick:s,className:"p-2 rounded-full hover:bg-white/20 transition-colors","aria-label":k?"暂停":"播放",children:k?(0,b.jsx)(y.Pause,{className:"w-5 h-5 text-white"}):(0,b.jsx)(u.Play,{className:"w-5 h-5 text-white"})}),(0,b.jsx)("button",{onClick:()=>{j.current&&(j.current.muted=!j.current.muted,n(!m))},className:"p-2 rounded-full hover:bg-white/20 transition-colors","aria-label":m?"取消静音":"静音",children:m?(0,b.jsx)(A.VolumeX,{className:"w-5 h-5 text-white"}):(0,b.jsx)(z.Volume2,{className:"w-5 h-5 text-white"})}),(0,b.jsx)("span",{className:"text-white text-sm hidden sm:inline",children:"空格键播放/暂停"})]})]}):(0,b.jsx)("img",{src:h.url,alt:h.title||h.filename,className:"max-w-full max-h-[calc(100vh-140px)] object-contain"})}),a.length>1&&(0,b.jsx)("button",{onClick:f,className:"flex-shrink-0 p-2 md:p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors ml-2","aria-label":"下一张",children:(0,b.jsx)(o.ChevronRight,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})})]})}),a.length>1&&(0,b.jsx)("div",{className:"px-4 py-3 flex-shrink-0",children:(0,b.jsx)("div",{className:"flex gap-2 overflow-x-auto max-w-full mx-auto p-2 rounded-xl bg-black/50 backdrop-blur-sm justify-center",children:a.map((a,d)=>(0,b.jsxs)("button",{onClick:()=>g(d),className:`relative flex-shrink-0 w-14 h-14 md:w-16 md:h-16 rounded-lg overflow-hidden border-2 transition-all ${d===c?"border-[#f8b195] scale-110":"border-transparent opacity-60 hover:opacity-100"}`,children:[(0,b.jsx)("img",{src:a.thumbnailUrl||a.url,alt:a.title||a.filename,className:"w-full h-full object-cover"}),(a.isVideo||a.isGif)&&(0,b.jsx)("div",{className:"absolute top-0.5 right-0.5 px-1 py-0.5 bg-[#f67280] rounded text-[8px] text-white font-medium leading-none",children:a.isVideo?"视频":"GIF"})]},a.id))})})]})}function C({childrenGroups:a,allChildrenImages:c,onImageClick:d}){return 0===a.length?(0,b.jsx)("div",{className:"text-center py-20",children:(0,b.jsx)("p",{className:"text-[#4a3728]/60",children:"暂无图片"})}):(0,b.jsx)("div",{className:"space-y-12",children:a.map(a=>(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-[#4a3728]",children:a.gallery.title}),(0,b.jsxs)("span",{className:"px-2 py-0.5 bg-[#8eb69b]/20 rounded-full text-xs text-[#8eb69b] font-medium",children:[a.images.length," 张"]})]}),(0,b.jsx)("div",{className:"columns-2 md:columns-3 lg:columns-4 gap-4 space-y-4",children:a.images.map(a=>{let e=c.findIndex(b=>b.id===a.id);return(0,b.jsx)("button",{onClick:()=>d(a,e,c),className:"group block w-full break-inside-avoid mb-4",children:(0,b.jsxs)("div",{className:"relative rounded-xl overflow-hidden bg-[#fef5f0] border border-[#8eb69b]/10 hover:border-[#f8b195]/50 hover:shadow-lg hover:shadow-[#f8b195]/10 transition-all duration-300",children:[(0,b.jsxs)("div",{className:"relative",children:[a.isGif||a.isVideo?(0,b.jsx)("img",{src:a.thumbnailUrl||a.url,alt:a.title||a.filename,className:"w-full h-auto object-cover group-hover:scale-105 transition-transform duration-500",loading:"lazy"}):(0,b.jsx)(q.default,{src:a.thumbnailUrl||a.url,alt:a.title||a.filename,width:400,height:300,className:"w-full h-auto object-cover group-hover:scale-105 transition-transform duration-500",sizes:"(max-width: 768px) 50vw, (max-width: 1024px) 33vw, 25vw"}),a.isVideo&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 group-hover:bg-black/30 transition-colors",children:(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/90 flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,b.jsx)(u.Play,{className:"w-6 h-6 text-[#f67280] fill-[#f67280] ml-0.5"})})})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-3",children:(0,b.jsx)("span",{className:"text-white text-sm font-medium line-clamp-1",children:a.title||a.filename})}),(a.isGif||a.isVideo)&&(0,b.jsx)("div",{className:"absolute top-2 right-2 px-2 py-0.5 bg-[#f67280] rounded text-xs text-white font-medium",children:a.isGif?"GIF":"视频"})]})},a.id)})})]},a.gallery.id))})}function D(){return(0,b.jsxs)("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-[#fef5f0] via-white to-[#f8b195]/10 border border-[#8eb69b]/20 p-8 md:p-12 mb-8",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#f8b195]/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-[#8eb69b]/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"p-3 bg-[#f8b195]/20 rounded-2xl",children:(0,b.jsx)(s.ImageIcon,{className:"w-8 h-8 text-[#f8b195]"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-[#4a3728]",children:"欢迎来到咻咻满图集"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(c.Sparkles,{className:"w-4 h-4 text-[#f8b195]"}),(0,b.jsx)("span",{className:"text-sm text-[#4a3728]/60",children:"记录美好瞬间"})]})]})]}),(0,b.jsx)("p",{className:"text-[#4a3728]/70 leading-relaxed max-w-2xl mb-6",children:"这里汇集了粉丝二创作品、活动照片和生活瞬间。图集持续整理更新中， 欢迎各位小满虫投稿和分享。点击左侧导航或下方图集开始浏览吧！"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/80 rounded-full border border-[#8eb69b]/20",children:[(0,b.jsx)(e.Heart,{className:"w-4 h-4 text-[#f67280]"}),(0,b.jsx)("span",{className:"text-sm text-[#4a3728]",children:"粉丝二创"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/80 rounded-full border border-[#8eb69b]/20",children:[(0,b.jsx)(f.Camera,{className:"w-4 h-4 text-[#8eb69b]"}),(0,b.jsx)("span",{className:"text-sm text-[#4a3728]",children:"活动照片"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/80 rounded-full border border-[#8eb69b]/20",children:[(0,b.jsx)(c.Sparkles,{className:"w-4 h-4 text-[#f8b195]"}),(0,b.jsx)("span",{className:"text-sm text-[#4a3728]",children:"生活瞬间"})]})]})]})]})}function E(){let{galleryTree:a,currentGallery:m,images:n,breadcrumbs:o,loading:q,lightboxImage:r,currentImageIndex:s,sidebarOpen:u,expandedNodes:w,searchTerm:x,searchResults:y,showSearchResults:z,childrenImagesGroups:A,allChildrenImages:E,handleGalleryClick:F,handleBreadcrumbClick:G,handleImageClick:H,toggleExpand:I,handlePreviousImage:J,handleNextImage:K,setLightboxImage:L,setSidebarOpen:M,setSearchTerm:N,setCurrentImageIndex:O}=function(){let a=(0,j.useParams)(),b=(0,j.useRouter)(),c=a?.galleryId,[d,e]=(0,i.useState)([]),[f,g]=(0,i.useState)(null),[h,l]=(0,i.useState)([]),[m,n]=(0,i.useState)([]),[o,p]=(0,i.useState)(!1),[q,r]=(0,i.useState)(null),[s,t]=(0,i.useState)(0),[u,v]=(0,i.useState)(!1),[w,x]=(0,i.useState)(new Set),[y,z]=(0,i.useState)(""),[A,B]=(0,i.useState)([]),[C,D]=(0,i.useState)(!1),[E,F]=(0,i.useState)([]),[G,H]=(0,i.useState)([]),I=(0,i.useRef)(!1),J=(0,i.useRef)(null),K=(0,i.useRef)(!1),L=(0,i.useCallback)(async()=>{if(!(d.length>0)){p(!0);try{let a=await k.galleryRepository.getGalleries();e(a)}catch(a){console.error("Failed to load gallery tree:",a)}finally{p(!1)}}},[d.length]),M=(0,i.useCallback)(a=>!a.children||0===a.children.length,[]),N=(0,i.useCallback)(async a=>{if(J.current!==a){J.current=a,p(!0);try{let b=await k.galleryRepository.getGalleryImages(a);l(b.images),t(0)}catch(a){console.error("Failed to load images:",a),l([])}finally{p(!1),J.current=null}}},[]),O=(0,i.useCallback)(async a=>{if(J.current!==a){J.current=a,p(!0);try{let b=await k.galleryRepository.getChildrenImages(a);F(b.children);let c=b.children.flatMap(a=>a.images);H(c)}catch(a){console.error("Failed to load children images:",a),F([]),H([])}finally{p(!1),J.current=null}}},[]),P=(0,i.useCallback)(async a=>{f?.id!==a.id&&(b.push(`/gallery/${a.id}`),z(""),D(!1),g(a),a.breadcrumbs&&n(a.breadcrumbs),M(a)?(await N(a.id),F([])):(await O(a.id),l([])))},[f,M,N,O,b]),Q=(0,i.useCallback)(a=>{if(a.id!==f?.id)if("root"===a.id)b.push("/gallery"),g(null),n([]),l([]);else{let b=(a,c)=>{for(let d of a){if(d.id===c)return d;if(d.children){let a=b(d.children,c);if(a)return a}}return null},c=b(d,a.id);c&&P(c)}},[f,d,P,b]),R=(0,i.useCallback)((a,b,c)=>{if(r(a),c){let b=c.findIndex(b=>b.id===a.id);t(b>=0?b:0),l(c)}else t(b)},[]),S=(0,i.useCallback)(a=>{x(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]),T=(0,i.useCallback)(()=>{if(0===h.length)return;let a=0===s?h.length-1:s-1;t(a),r(h[a])},[h,s]),U=(0,i.useCallback)(()=>{if(0===h.length)return;let a=s===h.length-1?0:s+1;t(a),r(h[a])},[h,s]);return(0,i.useEffect)(()=>{I.current||(I.current=!0,L())},[L]),(0,i.useEffect)(()=>{if(d.length>0&&c&&!K.current){K.current=!0;let a=(b,c)=>{for(let d of b){if(d.id===c)return d;if(d.children){let b=a(d.children,c);if(b)return b}}return null},b=a(d,c);b&&P(b)}},[d,c,P]),(0,i.useEffect)(()=>{if(f){let a=(b,c,d)=>{for(let e of b){let b=[...d,e];if(e.id===c)return b;if(e.children){let d=a(e.children,c,b);if(d.length>0)return d}}return[]},b=a(d,f.id,[]);b.length>0&&x(new Set(b.map(a=>a.id)))}},[f,d]),(0,i.useEffect)(()=>{if(y.trim()){let a=(b,c,d=[])=>{for(let e of b)(e.title.toLowerCase().includes(c)||e.description.toLowerCase().includes(c))&&d.push(e),e.children&&a(e.children,c,d);return d};B(a(d,y.trim().toLowerCase())),D(!0)}else B([]),D(!1)},[y,d]),{galleryTree:d,currentGallery:f,images:h,breadcrumbs:m,loading:o,lightboxImage:q,currentImageIndex:s,sidebarOpen:u,expandedNodes:w,searchTerm:y,searchResults:A,showSearchResults:C,childrenImagesGroups:E,allChildrenImages:G,loadGalleryTree:L,handleGalleryClick:P,handleBreadcrumbClick:Q,handleImageClick:R,toggleExpand:S,handlePreviousImage:T,handleNextImage:U,setLightboxImage:r,setSidebarOpen:v,setSearchTerm:z,setCurrentImageIndex:t}}(),P=a=>!!a&&(!a.children||0===a.children.length);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.PageDecorations,{theme:"gallery"}),(0,b.jsxs)("div",{className:"fixed inset-0 pointer-events-none overflow-hidden -z-5",children:[(0,b.jsx)("div",{className:"absolute top-20 left-10 animate-bounce",style:{animationDuration:"3s"},children:(0,b.jsx)(d.Star,{className:"w-6 h-6 text-yellow-400/40"})}),(0,b.jsx)("div",{className:"absolute top-32 left-24 animate-pulse",style:{animationDelay:"0.4s"},children:(0,b.jsx)(c.Sparkles,{className:"w-5 h-5 text-[#f8b195]/40"})}),(0,b.jsx)("div",{className:"absolute top-24 right-16 animate-spin",style:{animationDuration:"4s"},children:(0,b.jsx)(g.Sun,{className:"w-8 h-8 text-orange-300/30"})}),(0,b.jsx)("div",{className:"absolute top-40 right-8 animate-pulse",style:{animationDelay:"0.6s"},children:(0,b.jsx)(e.Heart,{className:"w-5 h-5 text-[#f67280]/30 fill-[#f67280]/30"})}),(0,b.jsx)("div",{className:"absolute bottom-40 right-16 animate-bounce",style:{animationDuration:"3.5s",animationDelay:"0.5s"},children:(0,b.jsx)(f.Camera,{className:"w-6 h-6 text-[#8eb69b]/30"})}),(0,b.jsx)("div",{className:"absolute bottom-32 left-20 animate-pulse",style:{animationDelay:"0.8s"},children:(0,b.jsx)(c.Sparkles,{className:"w-5 h-5 text-pink-300/30"})})]}),(0,b.jsxs)("div",{className:"flex h-screen bg-[#fef5f0]",children:[(0,b.jsx)(l,{galleryTree:a,currentGallery:m,expandedNodes:w,onToggle:I,onSelect:F,isOpen:u,onClose:()=>M(!1)}),(0,b.jsxs)("main",{className:"flex-1 flex flex-col min-w-0",children:[(0,b.jsx)(p,{breadcrumbs:o,galleryTree:a,currentGallery:m,searchTerm:x,searchResults:y,showSearchResults:z,sidebarOpen:u,onSidebarToggle:()=>M(!u),onBreadcrumbClick:G,onSearchChange:N,onSearchResultClick:a=>{F(a),N("")},onQuickSelect:F}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[!m&&(0,b.jsx)(D,{}),q&&(0,b.jsxs)("div",{className:"py-48 flex flex-col items-center gap-6",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-8 border-[#f8b195]/20 border-t-[#f8b195] rounded-full animate-spin"}),(0,b.jsx)("span",{className:"text-[#8eb69b] font-black tracking-widest uppercase text-xs",children:"正在加载..."})]}),!q&&m&&P(m)&&n.length>0&&(0,b.jsx)(v,{images:n,onImageClick:H}),!q&&m&&!P(m)&&A.length>0&&(0,b.jsx)(C,{childrenGroups:A,allChildrenImages:E,onImageClick:H}),!q&&m&&!P(m)&&0===A.length&&m?.children&&(0,b.jsx)(t,{galleries:m.children,onGalleryClick:F}),!q&&!m&&(0,b.jsx)(t,{galleries:a,onGalleryClick:F})]})]}),r&&(0,b.jsx)(B,{images:n,currentIndex:s,onClose:()=>L(null),onPrevious:J,onNext:K,onIndexChange:O,onSelectImage:L})]})]})}a.s(["default",()=>E],48738)}];

//# sourceMappingURL=app_albums_components_GalleryPageClient_tsx_2f9973c2._.js.map